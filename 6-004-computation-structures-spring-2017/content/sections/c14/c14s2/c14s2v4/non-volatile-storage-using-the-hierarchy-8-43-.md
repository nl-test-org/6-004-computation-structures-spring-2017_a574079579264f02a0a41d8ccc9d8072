---
about_this_resource_text: ''
course_id: 6-004-computation-structures-spring-2017
embedded_media:
- id: Video-YouTube-Stream
  media_location: zvQPV1j7SSU
  parent_uid: bb376fa475f3c9c52c075893c67dfe96
  title: Video-YouTube-Stream
  type: Video
  uid: e134aab2185cbb4bf64359a5b843066d
- id: 3Play-3Play YouTube id-Stream
  media_location: zvQPV1j7SSU
  parent_uid: bb376fa475f3c9c52c075893c67dfe96
  title: 3Play-3Play YouTube id
  type: 3Play
  uid: 9a473c6e45d1d5441b1a3474db3844d3
- id: Thumbnail-YouTube-JPG_1
  media_location: https://img.youtube.com/vi/zvQPV1j7SSU/default.jpg
  parent_uid: bb376fa475f3c9c52c075893c67dfe96
  title: Thumbnail-YouTube-JPG
  type: Thumbnail
  uid: 7495529d5e430e3a5e385b834d6567b4
- id: zvQPV1j7SSU.srt
  parent_uid: bb376fa475f3c9c52c075893c67dfe96
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-004-computation-structures-spring-2017/c14/c14s2/c14s2v4/non-volatile-storage-using-the-hierarchy-8-43-/zvQPV1j7SSU.srt
  title: 3play caption file
  type: null
  uid: cbcfc7bcf9d8cf3c5fe385fc0b4c370e
- id: zvQPV1j7SSU.pdf
  parent_uid: bb376fa475f3c9c52c075893c67dfe96
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-004-computation-structures-spring-2017/c14/c14s2/c14s2v4/non-volatile-storage-using-the-hierarchy-8-43-/zvQPV1j7SSU.pdf
  title: 3play pdf file
  type: null
  uid: b30fbacce0c8e478029e5ba5dfde55ef
- id: Caption-3Play YouTube id-SRT
  parent_uid: bb376fa475f3c9c52c075893c67dfe96
  title: Caption-3Play YouTube id-SRT-English - US
  type: Caption
  uid: 28b154db88d41691ebfd23a8a96a31b6
- id: Transcript-3Play YouTube id-PDF
  parent_uid: bb376fa475f3c9c52c075893c67dfe96
  title: Transcript-3Play YouTube id-PDF-English - US
  type: Transcript
  uid: 2d5d473a31f2bbe2a54fbc80a2aba1dd
- id: Video-InternetArchive-MP4
  media_location: https://archive.org/download/MIT6.004S17/MIT6_004S17_14-02-04_300k.mp4
  parent_uid: bb376fa475f3c9c52c075893c67dfe96
  title: Video-Internet Archive-MP4
  type: Video
  uid: a72b007aba30a292431dabbf52d45e86
inline_embed_id: 96846333nonvolatilestorageusingthehierarchy84374534099
layout: video
order_index: null
parent_uid: 02431143e6aec81852c41ad87c0a255d
related_resources_text: ''
short_url: non-volatile-storage-using-the-hierarchy-8-43-
technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-004-computation-structures-spring-2017/c14/c14s2/c14s2v4/non-volatile-storage-using-the-hierarchy-8-43-
template_type: Embed
title: Non-volatile Storage; Using the Hierarchy (8:43)
transcript: <p><span m='890'>Non-volatile</span> <span m='1229'>memories</span> <span
  m='1569'>are</span> <span m='1909'>used</span> <span m='2249'>to</span> <span m='2589'>maintain</span>
  <span m='2929'>system</span> <span m='3269'>state</span> <span m='3609'>even</span>
  <span m='3949'>when</span> <span m='4289'>the</span> <span m='4629'>system</span>
  <span m='4969'>is</span> <span m='5309'>powered</span> <span m='5649'>down.</span>
  </p><p><span m='6790'>In</span> <span m='7173'>flash</span> <span m='7557'>memories,</span>
  <span m='7940'>long-term</span> <span m='8324'>storage</span> <span m='8707'>is</span>
  <span m='9091'>achieved</span> <span m='9475'>by</span> <span m='9858'>storing</span>
  <span m='10242'>charge</span> <span m='10625'>on</span> <span m='11009'>an</span>
  <span m='11392'>well-insulated</span> <span m='11776'>conductor</span> <span m='12160'>called</span>
  <span m='12592'>a</span> <span m='13025'>floating</span> <span m='13458'>gate,</span>
  <span m='13890'>where</span> <span m='14323'>it</span> <span m='14756'>will</span>
  <span m='15189'>remain</span> <span m='15621'>stable</span> <span m='16054'>for</span>
  <span m='16487'>years.</span> </p><p><span m='16920'>The</span> <span m='17271'>floating</span>
  <span m='17622'>gate</span> <span m='17974'>is</span> <span m='18325'>incorporated</span>
  <span m='18676'>in</span> <span m='19028'>a</span> <span m='19379'>standard</span>
  <span m='19730'>MOSFET,</span> <span m='20082'>placed</span> <span m='20433'>between</span>
  <span m='20784'>the</span> <span m='21136'>MOSFET's</span> <span m='21487'>gate</span>
  <span m='21838'>and</span> <span m='22190'>the</span> <span m='22836'>MOSFET's</span>
  <span m='23483'>channel.</span> </p><p><span m='24130'>If</span> <span m='24434'>there</span>
  <span m='24739'>is</span> <span m='25044'>no</span> <span m='25349'>charge</span>
  <span m='25654'>stored</span> <span m='25959'>on</span> <span m='26264'>the</span>
  <span m='26569'>floating</span> <span m='26874'>gate,</span> <span m='27179'>the</span>
  <span m='27484'>MOSFET</span> <span m='27789'>can</span> <span m='28094'>be</span>
  <span m='28399'>turned</span> <span m='28704'>on,</span> <span m='29009'>i.e.,</span>
  <span m='29314'>be</span> <span m='29619'>made</span> <span m='29990'>to</span>
  <span m='30361'>conduct,</span> <span m='30733'>by</span> <span m='31104'>placing</span>
  <span m='31476'>a</span> <span m='31847'>voltage</span> <span m='32218'>V_1</span>
  <span m='32590'>on</span> <span m='32961'>the</span> <span m='33333'>gate</span>
  <span m='33704'>terminal,</span> <span m='34075'>creating</span> <span m='34447'>an</span>
  <span m='34818'>inversion</span> <span m='35190'>layer</span> <span m='35747'>that</span>
  <span m='36305'>connects</span> <span m='36863'>the</span> <span m='37421'>MOSFET's</span>
  <span m='37978'>source</span> <span m='38536'>and</span> <span m='39094'>drain</span>
  <span m='39652'>terminals.</span> </p><p><span m='40210'>If</span> <span m='40504'>there</span>
  <span m='40799'>is</span> <span m='41093'>a</span> <span m='41388'>charge</span>
  <span m='41683'>stored</span> <span m='41977'>on</span> <span m='42272'>the</span>
  <span m='42567'>floating</span> <span m='42861'>gate,</span> <span m='43156'>a</span>
  <span m='43451'>higher</span> <span m='43745'>voltage</span> <span m='44040'>V_2</span>
  <span m='44335'>is</span> <span m='44629'>required</span> <span m='44924'>to</span>
  <span m='45219'>turn</span> <span m='45614'>on</span> <span m='46009'>the</span>
  <span m='46404'>MOSFET.</span> </p><p><span m='46800'>By</span> <span m='47074'>setting</span>
  <span m='47349'>the</span> <span m='47623'>gate</span> <span m='47898'>terminal</span>
  <span m='48173'>to</span> <span m='48447'>a</span> <span m='48722'>voltage</span>
  <span m='48997'>between</span> <span m='49271'>V_1</span> <span m='49546'>and</span>
  <span m='49821'>V_2,</span> <span m='50095'>we</span> <span m='50370'>can</span>
  <span m='50645'>determine</span> <span m='50919'>if</span> <span m='51194'>the</span>
  <span m='51469'>floating</span> <span m='51816'>gate</span> <span m='52164'>is</span>
  <span m='52512'>charged</span> <span m='52859'>by</span> <span m='53207'>testing</span>
  <span m='53555'>to</span> <span m='53902'>see</span> <span m='54250'>if</span> <span
  m='54598'>the</span> <span m='54945'>MOSFET</span> <span m='55293'>is</span> <span
  m='55641'>conducting.</span> </p><p><span m='55989'>In</span> <span m='56285'>fact,</span>
  <span m='56582'>if</span> <span m='56878'>we</span> <span m='57175'>can</span> <span
  m='57471'>measure</span> <span m='57768'>the</span> <span m='58064'>current</span>
  <span m='58361'>flowing</span> <span m='58657'>through</span> <span m='58954'>the</span>
  <span m='59250'>MOSFET,</span> <span m='59547'>we</span> <span m='59843'>can</span>
  <span m='60140'>determine</span> <span m='60436'>how</span> <span m='60733'>much</span>
  <span m='61030'>charge</span> <span m='61363'>is</span> <span m='61696'>stored</span>
  <span m='62029'>on</span> <span m='62362'>the</span> <span m='62695'>floating</span>
  <span m='63028'>gate,</span> <span m='63361'>making</span> <span m='63695'>it</span>
  <span m='64028'>possible</span> <span m='64361'>to</span> <span m='64694'>store</span>
  <span m='65027'>multiple</span> <span m='65360'>bits</span> <span m='65693'>of</span>
  <span m='66026'>information</span> <span m='66360'>in</span> <span m='66741'>one</span>
  <span m='67122'>flash</span> <span m='67504'>cell</span> <span m='67885'>by</span>
  <span m='68267'>varying</span> <span m='68648'>the</span> <span m='69030'>amount</span>
  <span m='69411'>of</span> <span m='69792'>charge</span> <span m='70174'>on</span>
  <span m='70555'>its</span> <span m='70937'>floating</span> <span m='71318'>gate.</span>
  </p><p><span m='71700'>Flash</span> <span m='72071'>cells</span> <span m='72442'>can</span>
  <span m='72814'>be</span> <span m='73185'>connected</span> <span m='73556'>in</span>
  <span m='73928'>parallel</span> <span m='74299'>or</span> <span m='74670'>series</span>
  <span m='75042'>to</span> <span m='75413'>form</span> <span m='75784'>circuits</span>
  <span m='76156'>resembling</span> <span m='76527'>CMOS</span> <span m='76898'>NOR</span>
  <span m='77270'>or</span> <span m='77635'>NAND</span> <span m='78000'>gates,</span>
  <span m='78366'>allowing</span> <span m='78731'>for</span> <span m='79096'>a</span>
  <span m='79462'>variety</span> <span m='79827'>of</span> <span m='80192'>access</span>
  <span m='80558'>architectures</span> <span m='80923'>suitable</span> <span m='81288'>for</span>
  <span m='81654'>either</span> <span m='82019'>random</span> <span m='82384'>or</span>
  <span m='82750'>sequential</span> <span m='84394'>access.</span> </p><p><span m='86039'>Flash</span>
  <span m='86409'>memories</span> <span m='86780'>are</span> <span m='87151'>very</span>
  <span m='87522'>dense,</span> <span m='87893'>approaching</span> <span m='88264'>the</span>
  <span m='88634'>areal</span> <span m='89005'>density</span> <span m='89376'>of</span>
  <span m='89747'>DRAMs,</span> <span m='90118'>particularly</span> <span m='90489'>when</span>
  <span m='90860'>each</span> <span m='91487'>cell</span> <span m='92114'>holds</span>
  <span m='92741'>multiple</span> <span m='93368'>bits</span> <span m='93995'>of</span>
  <span m='94622'>information.</span> </p><p><span m='95250'>Read</span> <span m='95543'>access</span>
  <span m='95836'>times</span> <span m='96129'>for</span> <span m='96422'>NOR</span>
  <span m='96715'>flash</span> <span m='97008'>memories</span> <span m='97301'>are</span>
  <span m='97594'>similar</span> <span m='97887'>to</span> <span m='98180'>that</span>
  <span m='98473'>of</span> <span m='98766'>DRAMs,</span> <span m='99059'>several</span>
  <span m='99352'>tens</span> <span m='99645'>of</span> <span m='99939'>nanoseconds.</span>
  </p><p><span m='101710'>Read</span> <span m='102090'>times</span> <span m='102471'>for</span>
  <span m='102852'>NAND</span> <span m='103232'>flash</span> <span m='103613'>memories</span>
  <span m='103994'>are</span> <span m='104374'>much</span> <span m='104755'>longer,</span>
  <span m='105136'>on</span> <span m='105516'>the</span> <span m='105897'>order</span>
  <span m='106278'>of</span> <span m='106658'>10</span> <span m='107039'>microseconds.</span>
  </p><p><span m='107420'>Write</span> <span m='107681'>times</span> <span m='107943'>for</span>
  <span m='108205'>all</span> <span m='108467'>types</span> <span m='108729'>of</span>
  <span m='108991'>flash</span> <span m='109253'>memories</span> <span m='109515'>are</span>
  <span m='109776'>quite</span> <span m='110038'>long</span> <span m='110300'>since</span>
  <span m='110562'>high</span> <span m='110824'>voltages</span> <span m='111086'>have</span>
  <span m='111348'>to</span> <span m='111610'>be</span> <span m='112135'>used</span>
  <span m='112661'>to</span> <span m='113186'>force</span> <span m='113712'>electrons</span>
  <span m='114238'>to</span> <span m='114763'>cross</span> <span m='115289'>the</span>
  <span m='115815'>insulating</span> <span m='116340'>barrier</span> <span m='116866'>surrounding</span>
  <span m='117392'>the</span> <span m='117917'>floating</span> <span m='118443'>gate.</span>
  </p><p><span m='118969'>Flash</span> <span m='119254'>memories</span> <span m='119539'>can</span>
  <span m='119824'>only</span> <span m='120109'>be</span> <span m='120394'>written</span>
  <span m='120679'>some</span> <span m='120964'>number</span> <span m='121249'>of</span>
  <span m='121534'>times</span> <span m='121819'>before</span> <span m='122104'>the</span>
  <span m='122389'>insulating</span> <span m='122674'>layer</span> <span m='122959'>is</span>
  <span m='123244'>damaged</span> <span m='123530'>to</span> <span m='123927'>the</span>
  <span m='124325'>point</span> <span m='124722'>that</span> <span m='125120'>the</span>
  <span m='125518'>floating</span> <span m='125915'>gate</span> <span m='126313'>will</span>
  <span m='126710'>no</span> <span m='127108'>longer</span> <span m='127506'>reliably</span>
  <span m='127903'>store</span> <span m='128301'>charge.</span> </p><p><span m='128699'>Currently</span>
  <span m='129136'>the</span> <span m='129573'>number</span> <span m='130010'>of</span>
  <span m='130447'>guaranteed</span> <span m='130884'>writes</span> <span m='131321'>varies</span>
  <span m='131758'>between</span> <span m='132195'>100,000</span> <span m='132632'>and</span>
  <span m='133070'>To</span> <span m='133569'>work</span> <span m='134068'>around</span>
  <span m='134567'>this</span> <span m='135066'>limitation,</span> <span m='135565'>flash</span>
  <span m='136065'>chips</span> <span m='136564'>contain</span> <span m='137063'>clever</span>
  <span m='137562'>address</span> <span m='138061'>mapping</span> <span m='138560'>algorithms</span>
  <span m='139060'>so</span> <span m='139350'>that</span> <span m='139641'>writes</span>
  <span m='139931'>to</span> <span m='140222'>the</span> <span m='140512'>same</span>
  <span m='140803'>address</span> <span m='141093'>actually</span> <span m='141384'>are</span>
  <span m='141675'>mapped</span> <span m='141965'>to</span> <span m='142256'>different</span>
  <span m='142546'>flash</span> <span m='142837'>cells</span> <span m='143127'>on</span>
  <span m='143418'>each</span> <span m='143709'>successive</span> <span m='145014'>write.</span>
  </p><p><span m='146320'>The</span> <span m='146702'>bottom</span> <span m='147084'>line</span>
  <span m='147466'>is</span> <span m='147849'>that</span> <span m='148231'>flash</span>
  <span m='148613'>memories</span> <span m='148996'>are</span> <span m='149378'>a</span>
  <span m='149760'>higher-performance</span> <span m='150143'>but</span> <span m='150525'>higher-cost</span>
  <span m='150907'>replacement</span> <span m='151290'>for</span> <span m='151810'>the</span>
  <span m='152330'>hard-disk</span> <span m='152850'>drive,</span> <span m='153370'>the</span>
  <span m='153890'>long-time</span> <span m='154410'>technology</span> <span m='154930'>of</span>
  <span m='155450'>choice</span> <span m='155970'>for</span> <span m='156490'>non-volatile</span>
  <span m='157010'>storage.</span> </p><p><span m='157530'>A</span> <span m='157930'>hard-disk</span>
  <span m='158331'>drive</span> <span m='158732'>(HDD)</span> <span m='159132'>contains</span>
  <span m='159533'>one</span> <span m='159934'>or</span> <span m='160334'>more</span>
  <span m='160735'>rotating</span> <span m='161136'>platters</span> <span m='161536'>coated</span>
  <span m='161937'>with</span> <span m='162338'>a</span> <span m='162738'>magnetic</span>
  <span m='163139'>material.</span> </p><p><span m='163540'>The</span> <span m='163987'>platters</span>
  <span m='164434'>rotate</span> <span m='164881'>at</span> <span m='165329'>speeds</span>
  <span m='165776'>ranging</span> <span m='166223'>from</span> <span m='166670'>5400</span>
  <span m='167118'>to</span> <span m='167565'>15000</span> <span m='168012'>RPM.</span>
  </p><p><span m='168460'>A</span> <span m='168869'>read/write</span> <span m='169278'>head</span>
  <span m='169688'>positioned</span> <span m='170097'>above</span> <span m='170506'>the</span>
  <span m='170916'>surface</span> <span m='171325'>of</span> <span m='171735'>a</span>
  <span m='172144'>platter</span> <span m='172553'>can</span> <span m='172963'>detect</span>
  <span m='173372'>or</span> <span m='173781'>change</span> <span m='174191'>the</span>
  <span m='174600'>orientation</span> <span m='175010'>of</span> <span m='175548'>the</span>
  <span m='176087'>magnetization</span> <span m='176626'>of</span> <span m='177165'>the</span>
  <span m='177703'>magnetic</span> <span m='178242'>material</span> <span m='178781'>below.</span>
  </p><p><span m='179320'>The</span> <span m='179635'>read/write</span> <span m='179950'>head</span>
  <span m='180265'>is</span> <span m='180581'>mounted</span> <span m='180896'>an</span>
  <span m='181211'>actuator</span> <span m='181526'>that</span> <span m='181842'>allows</span>
  <span m='182157'>it</span> <span m='182472'>to</span> <span m='182787'>be</span>
  <span m='183103'>positioned</span> <span m='183418'>over</span> <span m='183733'>different</span>
  <span m='184049'>circular</span> <span m='185184'>tracks.</span> </p><p><span m='186319'>To</span>
  <span m='186625'>read</span> <span m='186932'>a</span> <span m='187239'>particular</span>
  <span m='187546'>sector</span> <span m='187853'>of</span> <span m='188160'>data,</span>
  <span m='188467'>the</span> <span m='188774'>head</span> <span m='189081'>must</span>
  <span m='189388'>be</span> <span m='189695'>positioned</span> <span m='190002'>radially</span>
  <span m='190309'>over</span> <span m='190616'>the</span> <span m='190923'>correct</span>
  <span m='191230'>track,</span> <span m='191657'>then</span> <span m='192085'>wait</span>
  <span m='192513'>for</span> <span m='192941'>the</span> <span m='193369'>platter</span>
  <span m='193797'>to</span> <span m='194225'>rotate</span> <span m='194652'>until</span>
  <span m='195080'>it's</span> <span m='195508'>over</span> <span m='195936'>the</span>
  <span m='196364'>desired</span> <span m='196792'>sector.</span> </p><p><span m='197220'>The</span>
  <span m='197562'>average</span> <span m='197905'>total</span> <span m='198248'>time</span>
  <span m='198591'>required</span> <span m='198934'>to</span> <span m='199277'>correctly</span>
  <span m='199620'>position</span> <span m='199963'>the</span> <span m='200305'>head</span>
  <span m='200648'>is</span> <span m='200991'>on</span> <span m='201334'>the</span>
  <span m='201677'>order</span> <span m='202020'>of</span> <span m='202363'>10</span>
  <span m='202706'>milliseconds,</span> <span m='203049'>so</span> <span m='203420'>hard</span>
  <span m='203791'>disk</span> <span m='204162'>access</span> <span m='204534'>times</span>
  <span m='204905'>are</span> <span m='205276'>quite</span> <span m='205647'>long.</span>
  </p><p><span m='206019'>However,</span> <span m='206348'>once</span> <span m='206677'>the</span>
  <span m='207006'>read/write</span> <span m='207336'>head</span> <span m='207665'>is</span>
  <span m='207994'>in</span> <span m='208324'>the</span> <span m='208653'>correct</span>
  <span m='208982'>position,</span> <span m='209311'>data</span> <span m='209641'>can</span>
  <span m='209970'>be</span> <span m='210299'>transferred</span> <span m='210629'>at</span>
  <span m='211073'>the</span> <span m='211517'>respectable</span> <span m='211961'>rate</span>
  <span m='212406'>of</span> <span m='212850'>100</span> <span m='213294'>megabytes/second.</span>
  </p><p><span m='213739'>If</span> <span m='214091'>the</span> <span m='214443'>head</span>
  <span m='214795'>has</span> <span m='215147'>to</span> <span m='215499'>be</span>
  <span m='215851'>repositioned</span> <span m='216203'>between</span> <span m='216555'>each</span>
  <span m='216907'>access,</span> <span m='217259'>the</span> <span m='217611'>effective</span>
  <span m='217963'>transfer</span> <span m='218315'>rate</span> <span m='218667'>drops</span>
  <span m='219019'>1000-fold,</span> <span m='219541'>limited</span> <span m='220064'>by</span>
  <span m='220587'>the</span> <span m='221110'>time</span> <span m='221633'>it</span>
  <span m='222155'>takes</span> <span m='222678'>to</span> <span m='223201'>reposition</span>
  <span m='223724'>the</span> <span m='224247'>head.</span> </p><p><span m='224770'>Hard</span>
  <span m='225210'>disk</span> <span m='225650'>drives</span> <span m='226090'>provide</span>
  <span m='226530'>cost-effective</span> <span m='226970'>non-volatile</span> <span
  m='227410'>storage</span> <span m='227850'>for</span> <span m='228290'>terabytes</span>
  <span m='228730'>of</span> <span m='229170'>data,</span> <span m='229610'>albeit</span>
  <span m='230050'>at</span> <span m='230490'>the</span> <span m='230930'>cost</span>
  <span m='231513'>of</span> <span m='232097'>slow</span> <span m='232681'>access</span>
  <span m='233265'>times.</span> </p><p><span m='233849'>This</span> <span m='234300'>completes</span>
  <span m='234751'>our</span> <span m='235202'>whirlwind</span> <span m='235654'>tour</span>
  <span m='236105'>of</span> <span m='236556'>memory</span> <span m='237007'>technologies.</span>
  </p><p><span m='237459'>If</span> <span m='237827'>you'd</span> <span m='238195'>like</span>
  <span m='238563'>to</span> <span m='238932'>learn</span> <span m='239300'>a</span>
  <span m='239668'>bit</span> <span m='240037'>more,</span> <span m='240405'>Wikipedia</span>
  <span m='240773'>has</span> <span m='241141'>useful</span> <span m='241510'>articles</span>
  <span m='241878'>on</span> <span m='242246'>each</span> <span m='242615'>type</span>
  <span m='242983'>of</span> <span m='243351'>device.</span> </p><p><span m='243720'>SRAM</span>
  <span m='244023'>sizes</span> <span m='244327'>and</span> <span m='244631'>access</span>
  <span m='244934'>times</span> <span m='245238'>have</span> <span m='245542'>kept</span>
  <span m='245845'>pace</span> <span m='246149'>with</span> <span m='246453'>the</span>
  <span m='246756'>improvements</span> <span m='247060'>in</span> <span m='247364'>the</span>
  <span m='247667'>size</span> <span m='247971'>and</span> <span m='248275'>speed</span>
  <span m='248579'>of</span> <span m='249132'>integrated</span> <span m='249685'>circuits.</span>
  </p><p><span m='250239'>Interestingly,</span> <span m='250679'>although</span> <span
  m='251120'>capacities</span> <span m='251561'>and</span> <span m='252002'>transfer</span>
  <span m='252443'>rates</span> <span m='252884'>for</span> <span m='253324'>DRAMs</span>
  <span m='253765'>and</span> <span m='254206'>HDDs</span> <span m='254647'>have</span>
  <span m='255088'>improved,</span> <span m='255529'>their</span> <span m='255970'>initial</span>
  <span m='256308'>access</span> <span m='256647'>times</span> <span m='256986'>have</span>
  <span m='257325'>not</span> <span m='257663'>improved</span> <span m='258002'>nearly</span>
  <span m='258341'>as</span> <span m='258680'>rapidly.</span> </p><p><span m='259019'>Thankfully</span>
  <span m='259430'>over</span> <span m='259841'>the</span> <span m='260253'>past</span>
  <span m='260664'>decade</span> <span m='261076'>flash</span> <span m='261487'>memories</span>
  <span m='261898'>have</span> <span m='262310'>helped</span> <span m='262721'>to</span>
  <span m='263133'>fill</span> <span m='263544'>the</span> <span m='263955'>performance</span>
  <span m='264367'>gap</span> <span m='264778'>between</span> <span m='265190'>processor</span>
  <span m='266060'>speeds</span> <span m='266930'>and</span> <span m='267800'>HDDs.</span>
  </p><p><span m='268670'>But</span> <span m='269080'>the</span> <span m='269491'>gap</span>
  <span m='269902'>between</span> <span m='270312'>processor</span> <span m='270723'>cycle</span>
  <span m='271134'>times</span> <span m='271544'>and</span> <span m='271955'>DRAM</span>
  <span m='272366'>access</span> <span m='272776'>times</span> <span m='273187'>has</span>
  <span m='273598'>continued</span> <span m='274008'>to</span> <span m='274419'>widen,</span>
  <span m='274830'>increasing</span> <span m='275490'>the</span> <span m='276150'>challenge</span>
  <span m='276810'>of</span> <span m='277470'>designing</span> <span m='278130'>low-latency</span>
  <span m='278790'>high-capacity</span> <span m='279450'>memory</span> <span m='280110'>systems.</span>
  </p><p><span m='280770'>The</span> <span m='281138'>capacity</span> <span m='281506'>of</span>
  <span m='281874'>the</span> <span m='282242'>available</span> <span m='282610'>memory</span>
  <span m='282978'>technologies</span> <span m='283346'>varies</span> <span m='283714'>over</span>
  <span m='284082'>10</span> <span m='284450'>orders</span> <span m='284818'>of</span>
  <span m='285186'>magnitude,</span> <span m='285554'>and</span> <span m='285922'>the</span>
  <span m='286290'>variation</span> <span m='286761'>in</span> <span m='287232'>latencies</span>
  <span m='287703'>varies</span> <span m='288174'>over</span> <span m='288645'>8</span>
  <span m='289116'>orders</span> <span m='289587'>of</span> <span m='290058'>magnitude.</span>
  </p><p><span m='290530'>This</span> <span m='290946'>creates</span> <span m='291363'>a</span>
  <span m='291780'>considerable</span> <span m='292197'>challenge</span> <span m='292614'>in</span>
  <span m='293031'>figuring</span> <span m='293448'>out</span> <span m='293865'>how</span>
  <span m='294281'>to</span> <span m='294698'>navigate</span> <span m='295115'>the</span>
  <span m='295532'>speed</span> <span m='295949'>vs</span> <span m='296366'>size</span>
  <span m='296783'>tradeoffs.</span> </p><p><span m='297200'>Each</span> <span m='297593'>transition</span>
  <span m='297987'>in</span> <span m='298381'>memory</span> <span m='298775'>hierarchy</span>
  <span m='299169'>shows</span> <span m='299563'>the</span> <span m='299956'>same</span>
  <span m='300350'>fundamental</span> <span m='300744'>design</span> <span m='301138'>choice:</span>
  <span m='301532'>we</span> <span m='301926'>can</span> <span m='302320'>pick</span>
  <span m='303285'>smaller-and-faster</span> <span m='304250'>or</span> <span m='305215'>larger-and-slower.</span>
  </p><p><span m='306180'>This</span> <span m='306512'>is</span> <span m='306845'>a</span>
  <span m='307178'>bit</span> <span m='307511'>awkward</span> <span m='307843'>actually</span>
  <span m='308176'>-</span> <span m='308509'>can</span> <span m='308842'>we</span>
  <span m='309175'>figure</span> <span m='309507'>how</span> <span m='309840'>to</span>
  <span m='310173'>get</span> <span m='310506'>the</span> <span m='310838'>best</span>
  <span m='311171'>of</span> <span m='311504'>both</span> <span m='311837'>worlds?</span>
  </p><p><span m='312170'>We</span> <span m='312460'>want</span> <span m='312751'>our</span>
  <span m='313041'>system</span> <span m='313332'>to</span> <span m='313622'>behave</span>
  <span m='313913'>as</span> <span m='314204'>if</span> <span m='314494'>it</span>
  <span m='314785'>had</span> <span m='315075'>a</span> <span m='315366'>large,</span>
  <span m='315657'>fast,</span> <span m='315947'>and</span> <span m='316238'>cheap</span>
  <span m='316528'>main</span> <span m='316819'>memory.</span> </p><p><span m='317110'>Clearly</span>
  <span m='317511'>we</span> <span m='317913'>can't</span> <span m='318315'>achieve</span>
  <span m='318717'>this</span> <span m='319119'>goal</span> <span m='319520'>using</span>
  <span m='319922'>any</span> <span m='320324'>single</span> <span m='320726'>memory</span>
  <span m='321128'>technology.</span> </p><p><span m='321530'>Here's</span> <span
  m='321970'>an</span> <span m='322411'>idea:</span> <span m='322852'>can</span> <span
  m='323292'>we</span> <span m='323733'>use</span> <span m='324174'>a</span> <span
  m='324615'>hierarchical</span> <span m='325055'>system</span> <span m='325496'>of</span>
  <span m='325937'>memories</span> <span m='326377'>with</span> <span m='326818'>different</span>
  <span m='327259'>tradeoffs</span> <span m='327700'>to</span> <span m='328093'>achieve</span>
  <span m='328487'>close</span> <span m='328881'>to</span> <span m='329275'>the</span>
  <span m='329669'>same</span> <span m='330063'>results</span> <span m='330456'>as</span>
  <span m='330850'>a</span> <span m='331244'>large,</span> <span m='331638'>fast,</span>
  <span m='332032'>cheap</span> <span m='332426'>memory?</span> </p><p><span m='332820'>Could</span>
  <span m='333130'>we</span> <span m='333440'>arrange</span> <span m='333750'>for</span>
  <span m='334060'>memory</span> <span m='334370'>locations</span> <span m='334680'>we're</span>
  <span m='334990'>using</span> <span m='335300'>often</span> <span m='335610'>to</span>
  <span m='335920'>be</span> <span m='336230'>stored,</span> <span m='336540'>say,</span>
  <span m='336850'>in</span> <span m='337160'>SRAM</span> <span m='337470'>and</span>
  <span m='337780'>have</span> <span m='338310'>those</span> <span m='338840'>accesses</span>
  <span m='339370'>be</span> <span m='339900'>low</span> <span m='340430'>latency?</span>
  </p><p><span m='340960'>Could</span> <span m='341253'>the</span> <span m='341547'>rest</span>
  <span m='341841'>of</span> <span m='342134'>the</span> <span m='342428'>data</span>
  <span m='342722'>could</span> <span m='343015'>be</span> <span m='343309'>stored</span>
  <span m='343603'>in</span> <span m='343896'>the</span> <span m='344190'>larger</span>
  <span m='344484'>and</span> <span m='344777'>slower</span> <span m='345071'>memory</span>
  <span m='345365'>components,</span> <span m='345659'>moving</span> <span m='345929'>the</span>
  <span m='346199'>between</span> <span m='346469'>the</span> <span m='346739'>levels</span>
  <span m='347009'>when</span> <span m='347279'>necessary?</span> </p><p><span m='347550'>Let's</span>
  <span m='347935'>follow</span> <span m='348321'>this</span> <span m='348707'>train</span>
  <span m='349093'>of</span> <span m='349479'>thought</span> <span m='349865'>and</span>
  <span m='350250'>see</span> <span m='350636'>where</span> <span m='351022'>it</span>
  <span m='351408'>leads</span> <span m='351794'>us.</span> </p><p><span m='352180'>There</span>
  <span m='352525'>are</span> <span m='352871'>two</span> <span m='353217'>approaches</span>
  <span m='353562'>we</span> <span m='353908'>might</span> <span m='354254'>take.</span>
  </p><p><span m='354600'>The</span> <span m='354889'>first</span> <span m='355178'>is</span>
  <span m='355468'>to</span> <span m='355757'>expose</span> <span m='356047'>the</span>
  <span m='356336'>hierarchy,</span> <span m='356625'>providing</span> <span m='356915'>some</span>
  <span m='357204'>amount</span> <span m='357494'>of</span> <span m='357783'>each</span>
  <span m='358072'>type</span> <span m='358362'>of</span> <span m='358651'>storage</span>
  <span m='358941'>and</span> <span m='359230'>let</span> <span m='359520'>the</span>
  <span m='359918'>programmer</span> <span m='360317'>decide</span> <span m='360715'>how</span>
  <span m='361114'>best</span> <span m='361512'>to</span> <span m='361911'>allocate</span>
  <span m='362310'>the</span> <span m='362708'>various</span> <span m='363107'>memory</span>
  <span m='363505'>resources</span> <span m='363904'>for</span> <span m='364302'>each</span>
  <span m='364701'>particular</span> <span m='365100'>computation.</span> </p><p><span
  m='366880'>The</span> <span m='367205'>programmer</span> <span m='367530'>would</span>
  <span m='367855'>write</span> <span m='368180'>code</span> <span m='368505'>that</span>
  <span m='368830'>moved</span> <span m='369155'>data</span> <span m='369480'>into</span>
  <span m='369805'>fast</span> <span m='370130'>storage</span> <span m='370455'>when</span>
  <span m='370780'>appropriate,</span> <span m='371105'>then</span> <span m='371430'>back</span>
  <span m='371815'>to</span> <span m='372201'>the</span> <span m='372587'>larger</span>
  <span m='372972'>and</span> <span m='373358'>slower</span> <span m='373744'>memories</span>
  <span m='374130'>when</span> <span m='374515'>low-latency</span> <span m='374901'>access</span>
  <span m='375287'>was</span> <span m='375672'>no</span> <span m='376058'>longer</span>
  <span m='376444'>required.</span> </p><p><span m='376830'>There</span> <span m='377143'>would</span>
  <span m='377456'>only</span> <span m='377769'>be</span> <span m='378082'>a</span>
  <span m='378395'>small</span> <span m='378709'>amount</span> <span m='379022'>of</span>
  <span m='379335'>the</span> <span m='379648'>fastest</span> <span m='379961'>memory,</span>
  <span m='380275'>so</span> <span m='380588'>data</span> <span m='380901'>would</span>
  <span m='381214'>be</span> <span m='381527'>constantly</span> <span m='381841'>in</span>
  <span m='382407'>motion</span> <span m='382974'>as</span> <span m='383540'>the</span>
  <span m='384107'>focus</span> <span m='384673'>of</span> <span m='385240'>the</span>
  <span m='385806'>computation</span> <span m='386373'>changed.</span> </p><p><span
  m='386940'>This</span> <span m='387420'>approach</span> <span m='387900'>has</span>
  <span m='388380'>had</span> <span m='388860'>notable</span> <span m='389340'>advocates.</span>
  </p><p><span m='389820'>Perhaps</span> <span m='390295'>the</span> <span m='390771'>most</span>
  <span m='391247'>influential</span> <span m='391723'>was</span> <span m='392199'>Seymour</span>
  <span m='392675'>Cray,</span> <span m='393150'>the</span> <span m='393626'>"Steve</span>
  <span m='394102'>Jobs"</span> <span m='394578'>of</span> <span m='395054'>supercomputers.</span>
  </p><p><span m='395530'>Cray</span> <span m='395886'>was</span> <span m='396243'>the</span>
  <span m='396600'>architect</span> <span m='396956'>of</span> <span m='397313'>the</span>
  <span m='397670'>world's</span> <span m='398026'>fastest</span> <span m='398383'>computers</span>
  <span m='398740'>in</span> <span m='399096'>each</span> <span m='399453'>of</span>
  <span m='399810'>three</span> <span m='400166'>decades,</span> <span m='400523'>inventing</span>
  <span m='400880'>many</span> <span m='401408'>of</span> <span m='401936'>the</span>
  <span m='402464'>technologies</span> <span m='402992'>that</span> <span m='403520'>form</span>
  <span m='404049'>the</span> <span m='404577'>foundation</span> <span m='405105'>of</span>
  <span m='405633'>high-performance</span> <span m='406161'>computing.</span> </p><p><span
  m='406690'>His</span> <span m='407051'>insight</span> <span m='407413'>to</span>
  <span m='407775'>managing</span> <span m='408137'>the</span> <span m='408499'>memory</span>
  <span m='408861'>hierarchy</span> <span m='409223'>was</span> <span m='409585'>to</span>
  <span m='409946'>organize</span> <span m='410308'>data</span> <span m='410670'>as</span>
  <span m='411032'>vectors</span> <span m='411394'>and</span> <span m='411756'>move</span>
  <span m='412118'>vectors</span> <span m='412480'>in</span> <span m='412842'>and</span>
  <span m='413204'>out</span> <span m='413566'>of</span> <span m='413928'>fast</span>
  <span m='414291'>memory</span> <span m='414653'>under</span> <span m='415015'>program</span>
  <span m='415377'>control.</span> </p><p><span m='415740'>This</span> <span m='416135'>was</span>
  <span m='416530'>actually</span> <span m='416926'>a</span> <span m='417321'>good</span>
  <span m='417716'>data</span> <span m='418112'>abstraction</span> <span m='418507'>for</span>
  <span m='418903'>certain</span> <span m='419298'>types</span> <span m='419693'>of</span>
  <span m='420089'>scientific</span> <span m='420484'>computing</span> <span m='420880'>and</span>
  <span m='421309'>his</span> <span m='421738'>vector</span> <span m='422167'>machines</span>
  <span m='422596'>had</span> <span m='423025'>the</span> <span m='423455'>top</span>
  <span m='423884'>computing</span> <span m='424313'>benchmarks</span> <span m='424742'>for</span>
  <span m='425171'>many</span> <span m='425600'>years.</span> </p><p><span m='426030'>The</span>
  <span m='426397'>second</span> <span m='426765'>alternative</span> <span m='427132'>is</span>
  <span m='427500'>to</span> <span m='427867'>hide</span> <span m='428235'>the</span>
  <span m='428602'>hierarchy</span> <span m='428970'>and</span> <span m='429337'>simply</span>
  <span m='429705'>tell</span> <span m='430072'>the</span> <span m='430440'>programmer</span>
  <span m='430807'>they</span> <span m='431175'>have</span> <span m='431542'>a</span>
  <span m='431910'>large,</span> <span m='432328'>uniform</span> <span m='432747'>address</span>
  <span m='433166'>space</span> <span m='433585'>to</span> <span m='434004'>use</span>
  <span m='434423'>as</span> <span m='434842'>they</span> <span m='435261'>wish.</span>
  </p><p><span m='435680'>The</span> <span m='436020'>memory</span> <span m='436360'>system</span>
  <span m='436700'>would,</span> <span m='437040'>behind</span> <span m='437380'>the</span>
  <span m='437720'>scenes,</span> <span m='438060'>move</span> <span m='438400'>data</span>
  <span m='438740'>between</span> <span m='439080'>the</span> <span m='439420'>various</span>
  <span m='439760'>levels</span> <span m='440100'>of</span> <span m='440440'>the</span>
  <span m='440780'>memory</span> <span m='441338'>hierarchy,</span> <span m='441897'>depending</span>
  <span m='442456'>on</span> <span m='443015'>the</span> <span m='443574'>usage</span>
  <span m='444133'>patterns</span> <span m='444692'>it</span> <span m='445251'>detected.</span>
  </p><p><span m='445810'>This</span> <span m='446141'>would</span> <span m='446472'>require</span>
  <span m='446804'>circuitry</span> <span m='447135'>to</span> <span m='447466'>examine</span>
  <span m='447798'>each</span> <span m='448129'>memory</span> <span m='448460'>access</span>
  <span m='448792'>issued</span> <span m='449123'>by</span> <span m='449454'>the</span>
  <span m='449786'>CPU</span> <span m='450117'>to</span> <span m='450448'>determine</span>
  <span m='450780'>where</span> <span m='451247'>in</span> <span m='451715'>the</span>
  <span m='452183'>hierarchy</span> <span m='452651'>to</span> <span m='453118'>find</span>
  <span m='453586'>the</span> <span m='454054'>requested</span> <span m='454522'>location.</span>
  </p><p><span m='454990'>And</span> <span m='455346'>then,</span> <span m='455703'>if</span>
  <span m='456060'>a</span> <span m='456416'>particular</span> <span m='456773'>region</span>
  <span m='457130'>of</span> <span m='457486'>addresses</span> <span m='457843'>was</span>
  <span m='458200'>frequently</span> <span m='458556'>accessed</span> <span m='458913'>-</span>
  <span m='459270'>say,</span> <span m='459626'>when</span> <span m='459983'>fetching</span>
  <span m='460340'>instructions</span> <span m='460629'>in</span> <span m='460918'>a</span>
  <span m='461207'>loop</span> <span m='461496'>-</span> <span m='461785'>the</span>
  <span m='462075'>memory</span> <span m='462364'>system</span> <span m='462653'>would</span>
  <span m='462942'>arrange</span> <span m='463231'>for</span> <span m='463520'>those</span>
  <span m='463810'>accesses</span> <span m='464147'>to</span> <span m='464485'>be</span>
  <span m='464823'>mapped</span> <span m='465161'>to</span> <span m='465499'>the</span>
  <span m='465837'>fastest</span> <span m='466175'>memory</span> <span m='466512'>component</span>
  <span m='466850'>and</span> <span m='467188'>automatically</span> <span m='467526'>move</span>
  <span m='467864'>the</span> <span m='468202'>loop</span> <span m='468540'>instructions</span>
  <span m='469220'>there.</span> </p><p><span m='469900'>All</span> <span m='470282'>of</span>
  <span m='470664'>this</span> <span m='471046'>machinery</span> <span m='471428'>would</span>
  <span m='471810'>be</span> <span m='472192'>transparent</span> <span m='472575'>to</span>
  <span m='472957'>the</span> <span m='473339'>programmer:</span> <span m='473721'>the</span>
  <span m='474103'>program</span> <span m='474485'>would</span> <span m='474867'>simply</span>
  <span m='475250'>fetch</span> <span m='475700'>instructions</span> <span m='476151'>and</span>
  <span m='476602'>access</span> <span m='477053'>data</span> <span m='477503'>and</span>
  <span m='477954'>the</span> <span m='478405'>memory</span> <span m='478856'>system</span>
  <span m='479306'>would</span> <span m='479757'>handle</span> <span m='480208'>the</span>
  <span m='480659'>rest.</span> </p><p><span m='481110'>Could</span> <span m='481378'>the</span>
  <span m='481647'>memory</span> <span m='481916'>system</span> <span m='482185'>automatically</span>
  <span m='482453'>arrange</span> <span m='482722'>for</span> <span m='482991'>the</span>
  <span m='483260'>right</span> <span m='483528'>data</span> <span m='483797'>to</span>
  <span m='484066'>be</span> <span m='484335'>in</span> <span m='484603'>the</span>
  <span m='484872'>right</span> <span m='485141'>place</span> <span m='485410'>at</span>
  <span m='485955'>the</span> <span m='486500'>right</span> <span m='487045'>time?</span>
  </p><p><span m='487590'>Cray</span> <span m='488017'>was</span> <span m='488444'>deeply</span>
  <span m='488871'>skeptical</span> <span m='489298'>of</span> <span m='489725'>this</span>
  <span m='490152'>approach.</span> </p><p><span m='490580'>He</span> <span m='490931'>famously</span>
  <span m='491283'>quipped</span> <span m='491635'>"that</span> <span m='491987'>you</span>
  <span m='492339'>can't</span> <span m='492690'>fake</span> <span m='493042'>what</span>
  <span m='493394'>you</span> <span m='493746'>haven't</span> <span m='494098'>got".</span>
  </p><p><span m='494450'>Wouldn't</span> <span m='494702'>the</span> <span m='494955'>programmer,</span>
  <span m='495208'>with</span> <span m='495461'>her</span> <span m='495714'>knowledge</span>
  <span m='495967'>of</span> <span m='496220'>how</span> <span m='496473'>data</span>
  <span m='496726'>was</span> <span m='496979'>going</span> <span m='497232'>to</span>
  <span m='497485'>be</span> <span m='497738'>used</span> <span m='497991'>by</span>
  <span m='498244'>a</span> <span m='498497'>particular</span> <span m='498750'>program,</span>
  <span m='499156'>be</span> <span m='499562'>able</span> <span m='499969'>to</span>
  <span m='500375'>do</span> <span m='500782'>a</span> <span m='501188'>better</span>
  <span m='501595'>job</span> <span m='502001'>by</span> <span m='502407'>explicitly</span>
  <span m='502814'>managing</span> <span m='503220'>the</span> <span m='503627'>memory</span>
  <span m='504033'>hierarchy?</span> </p><p><span m='504440'>It</span> <span m='504823'>turns</span>
  <span m='505206'>out</span> <span m='505590'>that</span> <span m='505973'>when</span>
  <span m='506356'>running</span> <span m='506740'>general-purpose</span> <span m='507123'>programs,</span>
  <span m='507506'>it</span> <span m='507890'>is</span> <span m='508273'>possible</span>
  <span m='508656'>to</span> <span m='509040'>build</span> <span m='509423'>an</span>
  <span m='509806'>automatically</span> <span m='510190'>managed,</span> <span m='510765'>low-latency,</span>
  <span m='511340'>high-capacity</span> <span m='511915'>hierarchical</span> <span
  m='512490'>memory</span> <span m='513065'>system</span> <span m='513640'>that</span>
  <span m='514215'>appears</span> <span m='514790'>as</span> <span m='515365'>one</span>
  <span m='515940'>large,</span> <span m='516515'>uniform</span> <span m='517090'>memory.</span>
  </p><p><span m='518090'>What's</span> <span m='518578'>the</span> <span m='519067'>insight</span>
  <span m='519555'>that</span> <span m='520044'>makes</span> <span m='520532'>this</span>
  <span m='521021'>possible?</span> </p><p><span m='521510'>That's</span> <span m='521742'>the</span>
  <span m='521975'>topic</span> <span m='522208'>of</span> <span m='522441'>the</span>
  <span m='522674'>next</span> <span m='522907'>section.</span> </p>
type: course
uid: bb376fa475f3c9c52c075893c67dfe96

---
None