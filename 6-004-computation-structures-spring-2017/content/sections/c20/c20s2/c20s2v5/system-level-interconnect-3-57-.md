---
about_this_resource_text: ''
course_id: 6-004-computation-structures-spring-2017
embedded_media:
- id: Video-YouTube-Stream
  media_location: K1dbnQDAG8Q
  parent_uid: 2f9252f76335733aab377bec243e5792
  title: Video-YouTube-Stream
  type: Video
  uid: fcbf6a97396847a8992ae3135f4e2d70
- id: 3Play-3Play YouTube id-Stream
  media_location: K1dbnQDAG8Q
  parent_uid: 2f9252f76335733aab377bec243e5792
  title: 3Play-3Play YouTube id
  type: 3Play
  uid: fa13b485de7c913e74461d7c97d03dba
- id: Thumbnail-YouTube-JPG
  media_location: https://img.youtube.com/vi/K1dbnQDAG8Q/default.jpg
  parent_uid: 2f9252f76335733aab377bec243e5792
  title: Thumbnail-YouTube-JPG
  type: Thumbnail
  uid: bbb9af08f53b941d2c5db375f9ea9a7c
- id: K1dbnQDAG8Q.srt
  parent_uid: 2f9252f76335733aab377bec243e5792
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-004-computation-structures-spring-2017/c20/c20s2/c20s2v5/system-level-interconnect-3-57-/K1dbnQDAG8Q.srt
  title: 3play caption file
  type: null
  uid: fe24240e6cc9fe6c20c97514b067b97d
- id: K1dbnQDAG8Q.pdf
  parent_uid: 2f9252f76335733aab377bec243e5792
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-004-computation-structures-spring-2017/c20/c20s2/c20s2v5/system-level-interconnect-3-57-/K1dbnQDAG8Q.pdf
  title: 3play pdf file
  type: null
  uid: e36f8a37ba03747af295462b53a34df4
- id: Caption-3Play YouTube id-SRT
  parent_uid: 2f9252f76335733aab377bec243e5792
  title: Caption-3Play YouTube id-SRT-English - US
  type: Caption
  uid: 7812d1664bc8af8f274a2a9e6c6d4ee8
- id: Transcript-3Play YouTube id-PDF
  parent_uid: 2f9252f76335733aab377bec243e5792
  title: Transcript-3Play YouTube id-PDF-English - US
  type: Transcript
  uid: f74256401d77fa257bcffa37a17a27a2
- id: Video-InternetArchive-MP4
  media_location: https://archive.org/download/MIT6.004S17/MIT6_004S17_20-02-05_300k.mp4
  parent_uid: 2f9252f76335733aab377bec243e5792
  title: Video-Internet Archive-MP4
  type: Video
  uid: e7fb485cb6f9f026739f7507f6830c75
inline_embed_id: 34355010systemlevelinterconnect35713498526
layout: video
order_index: null
parent_uid: 1febd9fd143b32093edca9d9770e4e33
related_resources_text: ''
short_url: system-level-interconnect-3-57-
technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-004-computation-structures-spring-2017/c20/c20s2/c20s2v5/system-level-interconnect-3-57-
template_type: Embed
title: System-level Interconnect
transcript: <p><span m="360">Serial</span> <span m="1250">point-to-point</span> <span
  m="1960">links</span> <span m="2280">are</span> <span m="2380">the</span> <span
  m="2470">modern</span> <span m="2850">replacement</span> <span m="3570">for</span>
  <span m="3700">the</span> <span m="3790">parallel</span> <span m="4350">communications</span>
  <span m="5180">bus</span> <span m="5670">with</span> <span m="5980">all</span> <span
  m="6280">its</span> <span m="6450">electrical</span> <span m="7100">and</span> <span
  m="7280">timing</span> <span m="7640">issues.</span> <span m="8070">0..08</span>
  <span m="8290">Each</span> <span m="8680">link</span> <span m="8910">is</span> <span
  m="9000">unidirectional</span> <span m="10020">and</span> <span m="10300">has</span>
  <span m="10500">only</span> <span m="10730">a</span> <span m="10770">single</span>
  <span m="11110">driver</span> <span m="11720">and</span> <span m="12160">the</span>
  <span m="12230">receiver</span> <span m="12810">recovers</span> <span m="13540">the</span>
  <span m="13620">clock</span> <span m="13970">signal</span> <span m="14280">from</span>
  <span m="14480">the</span> <span m="14550">data</span> <span m="14830">stream,</span>
  <span m="15250">so</span> <span m="15480">there</span> <span m="15660">are</span>
  <span m="15760">no</span> <span m="15960">complications</span> <span m="16650">from</span>
  <span m="16870">sharing</span> <span m="17290">the</span> <span m="17360">channel,</span>
  <span m="17900">clock</span> <span m="18310">skew,</span> <span m="18730">and</span>
  <span m="18900">electrical</span> <span m="19360">problems.</span></p><p><span m="20760">The</span>
  <span m="20850">very</span> <span m="21200">controlled</span> <span m="21760">electrical</span>
  <span m="22310">environment</span> <span m="22910">enables</span> <span m="23510">very</span>
  <span m="23850">high</span> <span m="24170">signaling</span> <span m="24650">rates,</span>
  <span m="25210">well</span> <span m="25670">up</span> <span m="25830">into</span>
  <span m="26020">the</span> <span m="26170">gigahertz</span> <span m="26720">range</span>
  <span m="27070">using</span> <span m="27360">today&rsquo;s</span> <span m="27810">technologies.</span></p><p><span
  m="29210">If</span> <span m="29410">more</span> <span m="29800">throughput</span>
  <span m="30220">is</span> <span m="30380">needed,</span> <span m="30700">you</span>
  <span m="30790">can</span> <span m="30960">use</span> <span m="31250">multiple</span>
  <span m="31830">serial</span> <span m="32340">links</span> <span m="32619">in</span>
  <span m="32689">parallel.</span></p><p><span m="33980">Extra</span> <span m="34270">logic</span>
  <span m="34670">is</span> <span m="34780">needed</span> <span m="35060">to</span>
  <span m="35180">reassemble</span> <span m="35810">the</span> <span m="35910">original</span>
  <span m="36450">data</span> <span m="36770">from</span> <span m="37060">multiple</span>
  <span m="37490">packets</span> <span m="38010">sent</span> <span m="38180">in</span>
  <span m="38280">parallel</span> <span m="38850">over</span> <span m="39110">multiple</span>
  <span m="39620">links,</span> <span m="40250">but</span> <span m="40630">the</span>
  <span m="40720">cost</span> <span m="41150">of</span> <span m="41210">the</span>
  <span m="41280">required</span> <span m="41810">logic</span> <span m="42250">gates</span>
  <span m="42600">is</span> <span m="42660">very</span> <span m="42980">modest</span>
  <span m="43550">in</span> <span m="43640">current</span> <span m="43970">technologies.</span></p><p><span
  m="46270">Note</span> <span m="46490">that</span> <span m="46680">the</span> <span
  m="46890">expansion</span> <span m="47570">strategy</span> <span m="48180">of</span>
  <span m="48280">modern</span> <span m="48640">systems</span> <span m="49080">still</span>
  <span m="49430">uses</span> <span m="49830">the</span> <span m="49940">notion</span>
  <span m="50320">of</span> <span m="50440">an</span> <span m="50600">add-in</span>
  <span m="51010">card</span> <span m="51360">that</span> <span m="51470">plugs</span>
  <span m="51790">into</span> <span m="51990">the</span> <span m="52080">motherboard.</span></p><p><span
  m="53330">But</span> <span m="53470">instead</span> <span m="53820">of</span> <span
  m="53900">connecting</span> <span m="54410">to</span> <span m="54630">a</span> <span
  m="54690">parallel</span> <span m="55220">bus,</span> <span m="55770">the</span>
  <span m="56150">add-in</span> <span m="56430">card</span> <span m="56770">connects</span>
  <span m="57290">to</span> <span m="57420">one</span> <span m="57800">or</span> <span
  m="57940">more</span> <span m="58300">point-to-point</span> <span m="58950">communication</span>
  <span m="59610">links.</span></p><p><span m="60700">Here&rsquo;s</span> <span m="60950">the</span>
  <span m="61030">system-level</span> <span m="61700">communications</span> <span
  m="62390">diagram</span> <span m="62880">for</span> <span m="63100">a</span> <span
  m="63130">recent</span> <span m="63490">system</span> <span m="63900">based</span>
  <span m="64239">on</span> <span m="64379">an</span> <span m="64489">Intel</span>
  <span m="65060">Core</span> <span m="65459">i7</span> <span m="65780">CPU</span>
  <span m="66460">chip.</span></p><p><span m="67840">The</span> <span m="67960">CPU</span>
  <span m="68290">is</span> <span m="68400">connected</span> <span m="68830">directly</span>
  <span m="69240">to</span> <span m="69360">the</span> <span m="69450">memories</span>
  <span m="70280">for</span> <span m="70510">the</span> <span m="70620">highest-possible</span>
  <span m="71710">memory</span> <span m="72010">bandwidth,</span></p><p><span m="73090">but</span>
  <span m="73270">talks</span> <span m="73630">to</span> <span m="73830">all</span>
  <span m="74200">the</span> <span m="74350">other</span> <span m="74620">components</span>
  <span m="75280">over</span> <span m="75750">the</span> <span m="75900">QuickPath</span>
  <span m="76580">Interconnect</span> <span m="77180">(QPI),</span> <span m="77400">which</span>
  <span m="77730">has</span> <span m="77990">20</span> <span m="78190">differential</span>
  <span m="79050">signaling</span> <span m="79500">paths</span> <span m="79990">in</span>
  <span m="80120">each</span> <span m="80430">direction.</span></p><p><span m="81470">QPI</span>
  <span m="81980">supports</span> <span m="82510">up</span> <span m="82690">to</span>
  <span m="82970">6.4</span> <span m="83450">billion</span> <span m="84560">20-bit</span>
  <span m="84930">transfers</span> <span m="85560">in</span> <span m="85690">each</span>
  <span m="85940">direction</span> <span m="86480">every</span> <span m="86800">second.</span></p><p><span
  m="88450">All</span> <span m="88620">the</span> <span m="88740">other</span> <span
  m="88890">communication</span> <span m="89600">channels</span> <span m="90370">(USB,</span>
  <span m="90840">PCIe,</span> <span m="92120">networks,</span> <span m="92950">Serial</span>
  <span m="93430">ATA,</span> <span m="94120">Audio,</span> <span m="94800">etc.)</span>
  <span m="95600">are</span> <span m="96110">also</span> <span m="96540">serial</span>
  <span m="96980">links,</span> <span m="97460">providing</span> <span m="98070">various</span>
  <span m="98550">communication</span> <span m="99290">bandwidths</span> <span m="99840">depending</span>
  <span m="100350">on</span> <span m="100600">the</span> <span m="100750">application.</span></p><p><span
  m="102420">Reading</span> <span m="102720">about</span> <span m="102990">the</span>
  <span m="103050">QPI</span> <span m="103580">channel</span> <span m="104040">used</span>
  <span m="104330">by</span> <span m="104480">the</span> <span m="104580">CPU</span>
  <span m="105110">reminded</span> <span m="105700">me</span> <span m="106310">a</span>
  <span m="106690">lot</span> <span m="107160">of</span> <span m="107350">the</span>
  <span m="107440">one</span> <span m="107780">ring</span> <span m="108220">that</span>
  <span m="108370">could</span> <span m="108530">be</span> <span m="108660">used</span>
  <span m="108910">to</span> <span m="108980">control</span> <span m="109540">all</span>
  <span m="109840">of</span> <span m="109960">Middle</span> <span m="110200">Earth</span>
  <span m="110600">in</span> <span m="110660">the</span> <span m="110750">Tolkien</span>
  <span m="111330">trilogy</span> <span m="112020">Lord</span> <span m="112350">of</span>
  <span m="112450">the</span> <span m="112590">Rings.</span></p><p><span m="113560">Why</span>
  <span m="113800">mess</span> <span m="114060">around</span> <span m="114410">with</span>
  <span m="114550">a</span> <span m="114580">lot</span> <span m="114870">of</span>
  <span m="114950">specialized</span> <span m="115700">communication</span> <span
  m="116320">channels</span> <span m="117030">when</span> <span m="117330">you</span>
  <span m="117450">have</span> <span m="117610">a</span> <span m="117680">single</span>
  <span m="118190">solution</span> <span m="118750">that&rsquo;s</span> <span m="119010">powerful</span>
  <span m="119450">enough</span> <span m="119770">to</span> <span m="119890">solve</span>
  <span m="120210">all</span> <span m="120500">your</span> <span m="120690">communication</span>
  <span m="121360">needs?</span></p><p><span m="122540">PCI</span> <span m="123110">Express</span>
  <span m="123650">(PCIe)</span> <span m="123830">is</span> <span m="123970">often</span>
  <span m="124320">used</span> <span m="124680">as</span> <span m="124860">the</span>
  <span m="124940">communication</span> <span m="125730">link</span> <span m="125970">between</span>
  <span m="126290">components</span> <span m="126960">on</span> <span m="127060">the</span>
  <span m="127120">system</span> <span m="127570">motherboard.</span></p><p><span
  m="128840">A</span> <span m="128900">single</span> <span m="129330">PCIe</span>
  <span m="130130">version</span> <span m="130590">2</span> <span m="130669">&ldquo;lane&rdquo;</span>
  <span m="131140">transmits</span> <span m="131850">data</span> <span m="132160">at</span>
  <span m="132660">5</span> <span m="133160">Gb/sec</span> <span m="134040">using</span>
  <span m="134570">low-voltage</span> <span m="135410">differential</span> <span m="136040">signaling</span>
  <span m="136540">(LVDS)</span> <span m="136770">over</span> <span m="137080">wires</span>
  <span m="137640">designed</span> <span m="138040">to</span> <span m="138100">have</span>
  <span m="138360">a</span> <span m="138590">100-Ohm</span> <span m="139080">characteristic</span>
  <span m="139870">impedance.</span></p><p><span m="141690">The</span> <span m="141800">PCIe</span>
  <span m="142350">lane</span> <span m="142660">is</span> <span m="142840">under</span>
  <span m="143060">the</span> <span m="143170">control</span> <span m="143740">of</span>
  <span m="143820">the</span> <span m="143910">same</span> <span m="144220">sort</span>
  <span m="144440">of</span> <span m="144570">network</span> <span m="144990">stack</span>
  <span m="145350">as</span> <span m="145450">described</span> <span m="146010">earlier.</span></p><p><span
  m="147460">The</span> <span m="147550">physical</span> <span m="148120">layer</span>
  <span m="148370">transmits</span> <span m="149160">packet</span> <span m="149570">data</span>
  <span m="149810">through</span> <span m="150010">the</span> <span m="150110">wire.</span></p><p><span
  m="151200">Each</span> <span m="151440">packet</span> <span m="151780">starts</span>
  <span m="152140">with</span> <span m="152290">a</span> <span m="152340">training</span>
  <span m="152710">sequence</span> <span m="153140">to</span> <span m="153240">synchronize</span>
  <span m="153880">the</span> <span m="153970">receiver&rsquo;s</span> <span m="154750">clock-recovery</span>
  <span m="155640">circuitry,</span> <span m="156450">followed</span> <span m="157020">by</span>
  <span m="157210">a</span> <span m="157330">unique</span> <span m="157710">start</span>
  <span m="158060">sequence,</span> <span m="158710">then</span> <span m="158980">the</span>
  <span m="159060">packet&rsquo;s</span> <span m="159660">data</span> <span m="159960">payload,</span>
  <span m="160680">and</span> <span m="160990">ends</span> <span m="161450">with</span>
  <span m="161580">a</span> <span m="161610">unique</span> <span m="162050">end</span>
  <span m="162230">sequence.</span></p><p><span m="164430">The</span> <span m="164530">physical</span>
  <span m="165060">layer</span> <span m="165240">payload</span> <span m="165800">is</span>
  <span m="165930">organized</span> <span m="166580">as</span> <span m="166720">a</span>
  <span m="166760">sequence</span> <span m="167210">number,</span> <span m="167700">a</span>
  <span m="167930">transaction-layer</span> <span m="168880">payload</span> <span
  m="169410">and</span> <span m="169660">a</span> <span m="169850">cyclical</span>
  <span m="170490">redundancy</span> <span m="171100">check</span> <span m="171390">sequence</span>
  <span m="171910">that&rsquo;s</span> <span m="172080">used</span> <span m="172340">to</span>
  <span m="172430">validate</span> <span m="172980">the</span> <span m="173080">data.</span></p><p><span
  m="174230">Using</span> <span m="174520">the</span> <span m="174590">sequence</span>
  <span m="175070">number,</span> <span m="175470">the</span> <span m="175630">data</span>
  <span m="175950">link</span> <span m="176230">layer</span> <span m="176490">can</span>
  <span m="176660">tell</span> <span m="177010">when</span> <span m="177150">a</span>
  <span m="177210">packet</span> <span m="177640">has</span> <span m="177930">been</span>
  <span m="178110">dropped</span> <span m="178770">and</span> <span m="179140">request</span>
  <span m="179580">the</span> <span m="179650">transmitter</span> <span m="180230">restart</span>
  <span m="180810">transmission</span> <span m="181480">at</span> <span m="181650">the</span>
  <span m="181730">missing</span> <span m="182060">packet.</span></p><p><span m="183360">It</span>
  <span m="183490">also</span> <span m="183900">deals</span> <span m="184310">with</span>
  <span m="184490">flow</span> <span m="184740">control</span> <span m="185170">issues.</span></p><p><span
  m="186120">Finally,</span> <span m="186450">the</span> <span m="186540">transaction</span>
  <span m="187270">layer</span> <span m="187410">reassembles</span> <span m="188180">the</span>
  <span m="188250">message</span> <span m="188710">from</span> <span m="189240">the</span>
  <span m="189530">transaction</span> <span m="190290">layer</span> <span m="190470">payloads</span>
  <span m="191180">from</span> <span m="191500">all</span> <span m="191740">the</span>
  <span m="191800">lanes</span> <span m="192260">and</span> <span m="192410">uses</span>
  <span m="192790">the</span> <span m="192900">header</span> <span m="193340">to</span>
  <span m="193540">identify</span> <span m="194150">the</span> <span m="194310">intended</span>
  <span m="194820">recipient</span> <span m="195420">at</span> <span m="195520">the</span>
  <span m="195610">receive</span> <span m="196030">end.</span></p><p><span m="197410">Altogether,</span>
  <span m="198020">a</span> <span m="198080">significant</span> <span m="198640">amount</span>
  <span m="198880">of</span> <span m="199020">logic</span> <span m="199490">is</span>
  <span m="199610">needed</span> <span m="199940">to</span> <span m="200040">send</span>
  <span m="200420">and</span> <span m="200550">receive</span> <span m="201000">messages</span>
  <span m="201580">on</span> <span m="201670">multiple</span> <span m="202260">PCIe</span>
  <span m="202920">lanes,</span> <span m="203390">but</span> <span m="203630">the</span>
  <span m="203720">cost</span> <span m="204210">is</span> <span m="204360">quite</span>
  <span m="204570">acceptable</span> <span m="205210">when</span> <span m="205350">using</span>
  <span m="205690">today&rsquo;s</span> <span m="206280">integrated</span> <span m="206770">circuit</span>
  <span m="207100">technologies.</span></p><p><span m="209150">Using</span> <span
  m="209580">8</span> <span m="209780">lanes,</span> <span m="210250">the</span> <span
  m="210350">maximum</span> <span m="210950">transfer</span> <span m="211500">rate</span>
  <span m="211750">is</span> <span m="212310">4</span> <span m="212780">GB/sec,</span>
  <span m="213340">capable</span> <span m="213950">of</span> <span m="214040">satisfying</span>
  <span m="214660">the</span> <span m="214740">needs</span> <span m="215100">of</span>
  <span m="215210">high-performance</span> <span m="216000">peripherals</span> <span
  m="216640">such</span> <span m="216920">as</span> <span m="217050">graphics</span>
  <span m="217490">cards.</span></p><p><span m="218130">So</span> <span m="218610">knowledge</span>
  <span m="219140">from</span> <span m="219280">the</span> <span m="219380">networking</span>
  <span m="220000">world</span> <span m="220290">has</span> <span m="220480">reshaped</span>
  <span m="221150">how</span> <span m="221320">components</span> <span m="221950">communicate</span>
  <span m="222570">on</span> <span m="222680">the</span> <span m="222760">motherboard,</span>
  <span m="223620">driving</span> <span m="224300">the</span> <span m="224380">transition</span>
  <span m="224980">from</span> <span m="225250">parallel</span> <span m="225800">buses</span>
  <span m="226420">to</span> <span m="226740">a</span> <span m="226800">handful</span>
  <span m="227450">of</span> <span m="227530">serial</span> <span m="228100">point-to-point</span>
  <span m="228800">links.</span></p><p><span m="229770">As</span> <span m="229990">a</span>
  <span m="230060">result</span> <span m="230510">today&rsquo;s</span> <span m="230940">systems</span>
  <span m="231430">are</span> <span m="231540">faster,</span> <span m="232280">more</span>
  <span m="232640">reliable,</span> <span m="233460">more</span> <span m="233880">energy-efficient</span>
  <span m="234920">and</span> <span m="235220">smaller</span> <span m="235560">than</span>
  <span m="235650">ever</span> <span m="235800">before.</span></p>
type: course
uid: 2f9252f76335733aab377bec243e5792

---
None