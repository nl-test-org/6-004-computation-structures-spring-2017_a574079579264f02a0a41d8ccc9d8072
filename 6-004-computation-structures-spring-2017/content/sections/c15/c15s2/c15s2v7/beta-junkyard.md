---
about_this_resource_text: ''
course_id: 6-004-computation-structures-spring-2017
embedded_media:
- id: Video-YouTube-Stream
  media_location: -RqKDpeILyU
  parent_uid: 7393c2c5a336ff84391ab1c7e2b1ce62
  title: Video-YouTube-Stream
  type: Video
  uid: d0dd06f071614a71457d4ff6192deb23
- id: 3Play-3Play YouTube id-Stream
  media_location: -RqKDpeILyU
  parent_uid: 7393c2c5a336ff84391ab1c7e2b1ce62
  title: 3Play-3Play YouTube id
  type: 3Play
  uid: 161b0630ff3120a1626e3b9a19533888
- id: Thumbnail-YouTube-JPG_1
  media_location: https://img.youtube.com/vi/-RqKDpeILyU/default.jpg
  parent_uid: 7393c2c5a336ff84391ab1c7e2b1ce62
  title: Thumbnail-YouTube-JPG
  type: Thumbnail
  uid: 32662442c196ce51713bebcbb94a158d
- id: -RqKDpeILyU.srt
  parent_uid: 7393c2c5a336ff84391ab1c7e2b1ce62
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-004-computation-structures-spring-2017/c15/c15s2/c15s2v7/beta-junkyard/-RqKDpeILyU.srt
  title: 3play caption file
  type: null
  uid: 2a592217a32fa1fddb31424ddcbd47e2
- id: -RqKDpeILyU.pdf
  parent_uid: 7393c2c5a336ff84391ab1c7e2b1ce62
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-004-computation-structures-spring-2017/c15/c15s2/c15s2v7/beta-junkyard/-RqKDpeILyU.pdf
  title: 3play pdf file
  type: null
  uid: c958f7f344c5e35620e2aab6a5d19b91
- id: Caption-3Play YouTube id-SRT
  parent_uid: 7393c2c5a336ff84391ab1c7e2b1ce62
  title: Caption-3Play YouTube id-SRT-English - US
  type: Caption
  uid: 810861af40cc8176a9543d32c5c2fe42
- id: Transcript-3Play YouTube id-PDF
  parent_uid: 7393c2c5a336ff84391ab1c7e2b1ce62
  title: Transcript-3Play YouTube id-PDF-English - US
  type: Transcript
  uid: 8d10f64032a54b57e018c3ec243cf70c
- id: Video-InternetArchive-MP4
  media_location: https://archive.org/download/MIT6.004S17/MIT6_004S17_15-02-07-02_300k.mp4
  parent_uid: 7393c2c5a336ff84391ab1c7e2b1ce62
  title: Video-Internet Archive-MP4
  type: Video
  uid: 17f1b56e71431e569e6052f1e1905f22
inline_embed_id: 14532581betajunkyard37392294
layout: video
order_index: null
parent_uid: 4d52d6d8435902515638b0bdd4b13c32
related_resources_text: ''
short_url: beta-junkyard
technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-004-computation-structures-spring-2017/c15/c15s2/c15s2v7/beta-junkyard
template_type: Embed
title: Beta Junkyard
transcript: "<p><span m='490'>For</span> <span m='1150'>this</span> <span m='1470'>problem,</span>\
  \ <span m='2170'>assume</span> <span m='2630'>that</span> <span m='2750'>you</span>\
  \ <span m='2890'>have</span> <span m='3000'>discovered</span> <span m='3640'>a</span>\
  \ <span m='3820'>room</span> <span m='4120'>full</span> <span m='4440'>of</span>\
  \ <span m='4540'>discarded</span> <span m='5310'>5-stage</span> <span m='5880'>pipelined</span>\
  \ <span m='6480'>betas.</span> </p><p><span m='7460'>These</span> <span m='7670'>betas</span>\
  \ <span m='8210'>fall</span> <span m='8490'>into</span> <span m='8670'>four</span>\
  \ <span m='8970'>categories.</span> </p><p><span m='10320'>The</span> <span m='10390'>first</span>\
  \ <span m='10970'>is</span> <span m='11150'>completely</span> <span m='11680'>functional</span>\
  \ <span m='12410'>5-stage</span> <span m='12970'>Betas</span> <span m='13460'>with</span>\
  \ <span m='13640'>full</span> <span m='13950'>bypass</span> <span m='14570'>and</span>\
  \ <span m='14690'>annulment</span> <span m='15180'>logic.</span> </p><p><span m='16490'>The</span>\
  \ <span m='16550'>second</span> <span m='17300'>are</span> <span m='17570'>betas</span>\
  \ <span m='18000'>with</span> <span m='18150'>a</span> <span m='18180'>bad</span>\
  \ <span m='18560'>register</span> <span m='19030'>file.</span> </p><p><span m='19960'>In</span>\
  \ <span m='20100'>these</span> <span m='20380'>betas,</span> <span m='21020'>all</span>\
  \ <span m='21340'>data</span> <span m='21680'>read</span> <span m='21950'>directly</span>\
  \ <span m='22370'>from</span> <span m='22560'>the</span> <span m='22670'>register</span>\
  \ <span m='23110'>file</span> <span m='23560'>is</span> <span m='23720'>zero.</span>\
  \ </p><p><span m='24960'>Note</span> <span m='25170'>that</span> <span m='25310'>if</span>\
  \ <span m='25480'>the</span> <span m='25540'>data</span> <span m='25960'>is</span>\
  \ <span m='26090'>read</span> <span m='26340'>from</span> <span m='26550'>a</span>\
  \ <span m='26590'>bypass</span> <span m='27290'>path,</span> <span m='27840'>then</span>\
  \ <span m='28140'>the</span> <span m='28210'>correct</span> <span m='28690'>value</span>\
  \ <span m='29040'>will</span> <span m='29230'>be</span> <span m='29400'>read.</span>\
  \ </p><p><span m='30730'>The</span> <span m='30790'>third</span> <span m='31240'>set</span>\
  \ <span m='31650'>are</span> <span m='31830'>betas</span> <span m='32270'>without</span>\
  \ <span m='32700'>bypass</span> <span m='33300'>paths.</span> </p><p><span m='34400'>And</span>\
  \ <span m='34540'>finally,</span> <span m='35250'>the</span> <span m='35420'>fourth</span>\
  \ <span m='35860'>are</span> <span m='35950'>betas</span> <span m='36360'>without</span>\
  \ <span m='36740'>annulment</span> <span m='37260'>of</span> <span m='37390'>branch</span>\
  \ <span m='37770'>delay</span> <span m='38090'>slots.</span> </p><p><span m='39330'>The</span>\
  \ <span m='39390'>problem</span> <span m='39900'>is</span> <span m='40140'>that</span>\
  \ <span m='40300'>the</span> <span m='40360'>betas</span> <span m='40810'>are</span>\
  \ <span m='40910'>not</span> <span m='41180'>labeled,</span> <span m='41710'>so</span>\
  \ <span m='41910'>we</span> <span m='42020'>do</span> <span m='42100'>not</span>\
  \ <span m='42410'>know</span> <span m='42640'>which</span> <span m='42920'>falls</span>\
  \ <span m='43310'>into</span> <span m='43540'>which</span> <span m='43830'>category.</span>\
  \ </p><p><span m='46450'>You</span> <span m='46540'>come</span> <span m='46800'>up</span>\
  \ <span m='47040'>with</span> <span m='47190'>the</span> <span m='47260'>test</span>\
  \ <span m='47590'>program</span> <span m='48030'>shown</span> <span m='48380'>here.</span>\
  \ </p><p><span m='49140'>Your</span> <span m='49270'>plan</span> <span m='49890'>is</span>\
  \ <span m='50090'>to</span> <span m='50190'>single</span> <span m='50570'>step</span>\
  \ <span m='50930'>through</span> <span m='51150'>the</span> <span m='51240'>program</span>\
  \ <span m='51760'>using</span> <span m='52140'>each</span> <span m='52450'>Beta</span>\
  \ <span m='52730'>chip,</span> <span m='53370'>carefully</span> <span m='54090'>noting</span>\
  \ <span m='54570'>the</span> <span m='54720'>address</span> <span m='55170'>that</span>\
  \ <span m='55340'>the</span> <span m='55400'>final</span> <span m='55910'>JMP</span>\
  \ <span m='56300'>loads</span> <span m='56680'>into</span> <span m='56940'>the</span>\
  \ <span m='57040'>PC.</span> </p><p><span m='58340'>Your</span> <span m='58450'>goal</span>\
  \ <span m='58920'>is</span> <span m='59040'>to</span> <span m='59140'>determine</span>\
  \ <span m='59650'>which</span> <span m='59920'>of</span> <span m='60000'>the</span>\
  \ <span m='60110'>four</span> <span m='60390'>classes</span> <span m='61090'>each</span>\
  \ <span m='61410'>chip</span> <span m='61710'>falls</span> <span m='62060'>into</span>\
  \ <span m='62750'>via</span> <span m='63250'>this</span> <span m='63520'>JMP</span>\
  \ <span m='63820'>address.</span> </p><p><span m='65080'>Notice</span> <span m='65650'>that</span>\
  \ <span m='65800'>on</span> <span m='65910'>a</span> <span m='65950'>fully</span>\
  \ <span m='66400'>functional</span> <span m='67000'>beta,</span> <span m='67610'>this</span>\
  \ <span m='68080'>code</span> <span m='68340'>would</span> <span m='68500'>execute</span>\
  \ <span m='69170'>the</span> <span m='69340'>instructions</span> <span m='70040'>sequentially</span>\
  \ <span m='71060'>skipping</span> <span m='71800'>the</span> <span m='71880'>MULC</span>\
  \ <span m='72250'>instruction.</span> </p><p><span m='75560'>Here</span> <span m='75760'>we</span>\
  \ <span m='75900'>see</span> <span m='76140'>a</span> <span m='76270'>pipeline</span>\
  \ <span m='76840'>diagram</span> <span m='77490'>showing</span> <span m='77880'>execution</span>\
  \ <span m='78620'>of</span> <span m='78720'>this</span> <span m='78970'>program</span>\
  \ <span m='79510'>on</span> <span m='79680'>a</span> <span m='79720'>fully</span>\
  \ <span m='80110'>functional</span> <span m='80690'>beta</span> <span m='81040'>from</span>\
  \ <span m='81300'>category</span> <span m='81980'>C1.</span> </p><p><span m='83610'>It</span>\
  \ <span m='83750'>shows</span> <span m='84140'>that</span> <span m='84310'>the</span>\
  \ <span m='84370'>although</span> <span m='84710'>the</span> <span m='84800'>MULC</span>\
  \ <span m='85140'>instruction</span> <span m='85990'>is</span> <span m='86220'>fetched</span>\
  \ <span m='86620'>in</span> <span m='86710'>cycle</span> <span m='87220'>2,</span>\
  \ <span m='87310'>it</span> <span m='87850'>gets</span> <span m='88460'>annulled</span>\
  \ <span m='88950'>when</span> <span m='89170'>the</span> <span m='89660'>BEQ</span>\
  \ <span m='90050'>is</span> <span m='90240'>in</span> <span m='90390'>the</span>\
  \ <span m='90540'>RF</span> <span m='91020'>stage</span> <span m='91730'>and</span>\
  \ <span m='92000'>it</span> <span m='92110'>determines</span> <span m='92790'>that</span>\
  \ <span m='92910'>the</span> <span m='92990'>branch</span> <span m='93410'>to</span>\
  \ <span m='93540'>label</span> <span m='93950'>X,</span> <span m='94520'>or</span>\
  \ <span m='94690'>the</span> <span m='94790'>SUBC</span> <span m='95280'>instruction,</span>\
  \ <span m='96170'>will</span> <span m='96510'>be</span> <span m='96630'>taken.</span>\
  \ </p><p><span m='97870'>The</span> <span m='97950'>MULC</span> <span m='98380'>is</span>\
  \ <span m='98840'>annulled</span> <span m='99360'>by</span> <span m='99550'>inserting</span>\
  \ <span m='100110'>a</span> <span m='100170'>NOP</span> <span m='100650'>in</span>\
  \ <span m='100840'>its</span> <span m='101050'>place.</span> </p><p><span m='103280'>The</span>\
  \ <span m='103480'>ADDC</span> <span m='103750'>and</span> <span m='103980'>BEQ</span>\
  \ <span m='104180'>instructions</span> <span m='105010'>read</span> <span m='105310'>R31</span>\
  \ <span m='105500'>from</span> <span m='105840'>the</span> <span m='106300'>register</span>\
  \ <span m='107040'>file.</span> </p><p><span m='108440'>The</span> <span m='108690'>SUBC,</span>\
  \ <span m='109120'>however,</span> <span m='109920'>gets</span> <span m='110340'>the</span>\
  \ <span m='110440'>value</span> <span m='110840'>of</span> <span m='110940'>R2</span>\
  \ <span m='111310'>via</span> <span m='111800'>the</span> <span m='111900'>bypass</span>\
  \ <span m='112560'>path</span> <span m='112900'>from</span> <span m='113180'>the</span>\
  \ <span m='113620'>BEQ</span> <span m='113800'>instruction</span> <span m='114550'>which</span>\
  \ <span m='114820'>is</span> <span m='115000'>in</span> <span m='115170'>the</span>\
  \ <span m='115230'>MEM</span> <span m='115500'>stage.</span> </p><p><span m='117120'>The</span>\
  \ <span m='117260'>ADD</span> <span m='117810'>then</span> <span m='118080'>reads</span>\
  \ <span m='118800'>R0</span> <span m='119040'>and</span> <span m='119260'>R2.</span>\
  \ </p><p><span m='120840'>R0</span> <span m='121060'>has</span> <span m='121360'>already</span>\
  \ <span m='121690'>made</span> <span m='121910'>it</span> <span m='122030'>back</span>\
  \ <span m='122260'>to</span> <span m='122390'>the</span> <span m='122520'>register</span>\
  \ <span m='122960'>file</span> <span m='123390'>because</span> <span m='123720'>the</span>\
  \ <span m='123940'>ADDC</span> <span m='124200'>instruction</span> <span m='125030'>completed</span>\
  \ <span m='125690'>by</span> <span m='125880'>the</span> <span m='126030'>end</span>\
  \ <span m='126240'>of</span> <span m='126320'>cycle</span> <span m='126750'>4.</span>\
  \ </p><p><span m='127980'>R2,</span> <span m='128229'>however,</span> <span m='129000'>is</span>\
  \ <span m='129280'>read</span> <span m='129560'>via</span> <span m='129840'>the</span>\
  \ <span m='129949'>bypass</span> <span m='130610'>path</span> <span m='130910'>from</span>\
  \ <span m='131100'>the</span> <span m='131200'>SUBC</span> <span m='131590'>instruction</span>\
  \ <span m='132620'>which</span> <span m='132980'>is</span> <span m='133140'>in</span>\
  \ <span m='133350'>the</span> <span m='133690'>ALU</span> <span m='134000'>stage.</span>\
  \ </p><p><span m='135290'>Finally,</span> <span m='136040'>the</span> <span m='136170'>JMP,</span>\
  \ <span m='136660'>reads</span> <span m='136950'>the</span> <span m='137040'>value</span>\
  \ <span m='137460'>of</span> <span m='137580'>R3</span> <span m='138010'>via</span>\
  \ <span m='138540'>the</span> <span m='138650'>bypass</span> <span m='139390'>path</span>\
  \ <span m='139870'>from</span> <span m='140260'>the</span> <span m='140410'>ADD</span>\
  \ <span m='140660'>instruction</span> <span m='141400'>which</span> <span m='141650'>is</span>\
  \ <span m='141940'>in</span> <span m='142310'>the</span> <span m='142440'>ALU</span>\
  \ <span m='142610'>stage</span> <span m='143170'>in</span> <span m='143310'>cycle</span>\
  \ <span m='143950'>6.</span> </p><p><span m='145540'>When</span> <span m='145920'>run</span>\
  \ <span m='146190'>on</span> <span m='146320'>a</span> <span m='146350'>fully</span>\
  \ <span m='146730'>functional</span> <span m='147260'>beta</span> <span m='147700'>with</span>\
  \ <span m='148030'>bypass</span> <span m='148620'>paths</span> <span m='149040'>and</span>\
  \ <span m='149160'>annulment</span> <span m='149650'>of</span> <span m='149750'>branch</span>\
  \ <span m='150130'>delay</span> <span m='150450'>slots,</span> <span m='151200'>the</span>\
  \ <span m='151460'>code</span> <span m='151800'>behaves</span> <span m='152310'>as</span>\
  \ <span m='152470'>follows:</span> </p><p><span m='154380'>The</span> <span m='154600'>ADDC</span>\
  \ <span m='154730'>sets</span> <span m='155030'>R0</span> <span m='155660'>=</span>\
  \ <span m='156170'>4.</span> </p><p><span m='157530'>The</span> <span m='157980'>BEQ</span>\
  \ <span m='158330'>stores</span> <span m='158830'>PC</span> <span m='159360'>+</span>\
  \ <span m='159550'>4</span> <span m='159780'>into</span> <span m='160320'>R2.</span>\
  \ </p><p><span m='160610'>Since</span> <span m='161380'>the</span> <span m='162050'>ADDC</span>\
  \ <span m='162330'>is</span> <span m='162770'>at</span> <span m='162890'>address</span>\
  \ <span m='163580'>0,</span> <span m='163890'>the</span> <span m='164410'>BEQ</span>\
  \ <span m='164750'>is</span> <span m='164930'>at</span> <span m='165050'>address</span>\
  \ <span m='165780'>4,</span> <span m='166220'>so</span> <span m='166560'>PC</span>\
  \ <span m='167140'>+</span> <span m='167720'>4</span> <span m='168150'>=</span>\
  \ <span m='168180'>8</span> <span m='168360'>is</span> <span m='168660'>stored</span>\
  \ <span m='169010'>into</span> <span m='169320'>R2,</span> <span m='169920'>and</span>\
  \ <span m='170440'>the</span> <span m='170500'>program</span> <span m='171040'>branches</span>\
  \ <span m='171520'>to</span> <span m='171640'>label</span> <span m='172050'>X.</span>\
  \ </p><p><span m='173430'>Next,</span> <span m='173880'>the</span> <span m='173960'>SUBC</span>\
  \ <span m='174440'>subtracts</span> <span m='175240'>4</span> <span m='175400'>from</span>\
  \ <span m='175770'>the</span> <span m='175830'>latest</span> <span m='176280'>value</span>\
  \ <span m='176670'>of</span> <span m='176790'>R2</span> <span m='177390'>and</span>\
  \ <span m='177950'>stores</span> <span m='178510'>the</span> <span m='178620'>result</span>\
  \ <span m='179150'>which</span> <span m='179360'>is</span> <span m='179520'>4</span>\
  \ <span m='179740'>back</span> <span m='180310'>into</span> <span m='180680'>R2.</span>\
  \ </p><p><span m='180940'>The</span> <span m='181900'>ADD</span> <span m='183430'>adds</span>\
  \ <span m='184080'>R0</span> <span m='184470'>and</span> <span m='184850'>R2,</span>\
  \ <span m='185500'>or</span> <span m='186210'>4</span> <span m='186240'>and</span>\
  \ <span m='186660'>4,</span> <span m='187050'>and</span> <span m='187250'>stores</span>\
  \ <span m='187670'>the</span> <span m='187760'>result</span> <span m='188240'>which</span>\
  \ <span m='188420'>is</span> <span m='188660'>8</span> <span m='188850'>into</span>\
  \ <span m='189250'>R3.</span> </p><p><span m='189560'>The</span> <span m='190430'>JMP</span>\
  \ <span m='191450'>jumps</span> <span m='192080'>to</span> <span m='192180'>the</span>\
  \ <span m='192330'>address</span> <span m='192810'>in</span> <span m='192910'>R3</span>\
  \ <span m='193360'>which</span> <span m='193910'>is</span> <span m='197020'>8.</span>\
  \ </p><p><span m='197230'>When</span> <span m='197480'>run</span> <span m='197690'>on</span>\
  \ <span m='197850'>C2</span> <span m='198190'>which</span> <span m='198780'>has</span>\
  \ <span m='198960'>a</span> <span m='198990'>bad</span> <span m='199380'>register</span>\
  \ <span m='199850'>file</span> <span m='200220'>that</span> <span m='200390'>always</span>\
  \ <span m='200850'>outputs</span> <span m='201290'>a</span> <span m='201330'>zero,</span>\
  \ <span m='202110'>the</span> <span m='202410'>behavior</span> <span m='203010'>of</span>\
  \ <span m='203100'>the</span> <span m='203180'>program</span> <span m='203740'>changes</span>\
  \ <span m='204930'>a</span> <span m='205920'>bit.</span> </p><p><span m='206430'>The</span>\
  \ <span m='206720'>ADDC</span> <span m='206850'>and</span> <span m='206940'>BEQ</span>\
  \ <span m='207030'>instructions</span> <span m='207730'>which</span> <span m='207940'>use</span>\
  \ <span m='208220'>R31</span> <span m='208750'>which</span> <span m='209400'>is</span>\
  \ <span m='209640'>0</span> <span m='209810'>anyways</span> <span m='210640'>behave</span>\
  \ <span m='211040'>in</span> <span m='211150'>the</span> <span m='211220'>same</span>\
  \ <span m='211660'>way</span> <span m='212040'>as</span> <span m='212260'>before.</span>\
  \ </p><p><span m='213810'>The</span> <span m='213890'>SUBC,</span> <span m='214550'>which</span>\
  \ <span m='215000'>gets</span> <span m='215210'>the</span> <span m='215310'>value</span>\
  \ <span m='215720'>of</span> <span m='215840'>R2</span> <span m='216180'>from</span>\
  \ <span m='216570'>the</span> <span m='216660'>bypass</span> <span m='217350'>path,</span>\
  \ <span m='217990'>reads</span> <span m='218440'>the</span> <span m='218520'>correct</span>\
  \ <span m='219040'>value</span> <span m='219470'>for</span> <span m='219790'>R2</span>\
  \ <span m='220120'>which</span> <span m='220600'>is</span> <span m='220800'>8.</span>\
  \ </p><p><span m='221790'>Recall</span> <span m='222250'>that</span> <span m='222420'>only</span>\
  \ <span m='222810'>reads</span> <span m='223050'>directly</span> <span m='223550'>from</span>\
  \ <span m='223750'>the</span> <span m='223870'>register</span> <span m='224350'>file</span>\
  \ <span m='224760'>return</span> <span m='225130'>a</span> <span m='225170'>zero,</span>\
  \ <span m='225890'>whereas</span> <span m='226390'>if</span> <span m='226510'>the</span>\
  \ <span m='226580'>data</span> <span m='226920'>is</span> <span m='227040'>coming</span>\
  \ <span m='227360'>from</span> <span m='227570'>a</span> <span m='227630'>bypass</span>\
  \ <span m='228290'>path,</span> <span m='228830'>then</span> <span m='229160'>you</span>\
  \ <span m='229250'>get</span> <span m='229490'>the</span> <span m='229560'>correct</span>\
  \ <span m='230030'>value.</span> </p><p><span m='230960'>So</span> <span m='231130'>the</span>\
  \ <span m='231200'>SUBC</span> <span m='231800'>produces</span> <span m='232530'>a</span>\
  \ <span m='232590'>4.</span> </p><p><span m='232700'>The</span> <span m='233460'>ADD</span>\
  \ <span m='234730'>reads</span> <span m='235100'>R0</span> <span m='235480'>from</span>\
  \ <span m='235890'>the</span> <span m='236000'>register</span> <span m='236460'>file</span>\
  \ <span m='236940'>and</span> <span m='237110'>R2</span> <span m='237440'>from</span>\
  \ <span m='237870'>the</span> <span m='237950'>bypass</span> <span m='238560'>path.</span>\
  \ </p><p><span m='239600'>The</span> <span m='239690'>result</span> <span m='240260'>is</span>\
  \ <span m='240390'>that</span> <span m='240550'>the</span> <span m='240630'>value</span>\
  \ <span m='241050'>of</span> <span m='241280'>R0</span> <span m='241810'>is</span>\
  \ <span m='242240'>read</span> <span m='242480'>as</span> <span m='242610'>if</span>\
  \ <span m='242800'>it</span> <span m='242900'>was</span> <span m='243190'>0</span>\
  \ <span m='243410'>while</span> <span m='243980'>that</span> <span m='244400'>of</span>\
  \ <span m='244690'>R2</span> <span m='244960'>is</span> <span m='245530'>correct</span>\
  \ <span m='246000'>and</span> <span m='246230'>is</span> <span m='246590'>4.</span>\
  \ </p><p><span m='247690'>So</span> <span m='247890'>R3</span> <span m='248020'>gets</span>\
  \ <span m='248240'>the</span> <span m='248770'>value</span> <span m='249450'>4</span>\
  \ <span m='249710'>assigned</span> <span m='250360'>to</span> <span m='250550'>it,</span>\
  \ <span m='250930'>and</span> <span m='251250'>that</span> <span m='251430'>is</span>\
  \ <span m='251560'>the</span> <span m='251720'>address</span> <span m='252230'>that</span>\
  \ <span m='252350'>the</span> <span m='252440'>JMP</span> <span m='252800'>instruction</span>\
  \ <span m='253430'>jumps</span> <span m='253830'>to</span> <span m='254280'>because</span>\
  \ <span m='254870'>it</span> <span m='255090'>too</span> <span m='255570'>reads</span>\
  \ <span m='255820'>its</span> <span m='256040'>register</span> <span m='256570'>from</span>\
  \ <span m='256860'>a</span> <span m='256910'>bypass</span> <span m='257570'>path.</span>\
  \ </p><p><span m='260190'>When</span> <span m='260380'>run</span> <span m='260579'>on</span>\
  \ <span m='260750'>C3</span> <span m='261420'>which</span> <span m='261990'>does</span>\
  \ <span m='262180'>not</span> <span m='262410'>have</span> <span m='262670'>any</span>\
  \ <span m='262940'>bypass</span> <span m='263580'>paths,</span> <span m='264300'>some</span>\
  \ <span m='264730'>of</span> <span m='264800'>the</span> <span m='264900'>instructions</span>\
  \ <span m='265650'>will</span> <span m='265860'>read</span> <span m='266100'>stale</span>\
  \ <span m='266510'>values</span> <span m='267100'>of</span> <span m='267230'>their</span>\
  \ <span m='267380'>source</span> <span m='267840'>operands.</span> </p><p><span\
  \ m='269030'>Let\u2019s</span> <span m='269280'>go</span> <span m='269440'>through</span>\
  \ <span m='269770'>the</span> <span m='269910'>example</span> <span m='270490'>in</span>\
  \ <span m='270590'>detail.</span> </p><p><span m='271670'>The</span> <span m='271800'>ADDC</span>\
  \ <span m='271890'>and</span> <span m='272400'>BEQ</span> <span m='273240'>instructions</span>\
  \ <span m='274620'>read</span> <span m='275400'>R31</span> <span m='276000'>which</span>\
  \ <span m='276610'>is</span> <span m='276880'>0</span> <span m='277110'>from</span>\
  \ <span m='277400'>the</span> <span m='277480'>register</span> <span m='277960'>file</span>\
  \ <span m='278460'>so</span> <span m='278860'>what</span> <span m='279040'>they</span>\
  \ <span m='279190'>ultimately</span> <span m='279810'>produce</span> <span m='280420'>does</span>\
  \ <span m='280600'>not</span> <span m='280880'>change.</span> </p><p><span m='281820'>However,</span>\
  \ <span m='282560'>you</span> <span m='282840'>must</span> <span m='283150'>keep</span>\
  \ <span m='283350'>in</span> <span m='283470'>mind</span> <span m='283860'>that</span>\
  \ <span m='283990'>the</span> <span m='284160'>updated</span> <span m='284760'>value</span>\
  \ <span m='285180'>of</span> <span m='285280'>the</span> <span m='285370'>destination</span>\
  \ <span m='286180'>register</span> <span m='287000'>will</span> <span m='287330'>not</span>\
  \ <span m='287560'>get</span> <span m='287740'>updated</span> <span m='288340'>until</span>\
  \ <span m='288720'>after</span> <span m='289210'>that</span> <span m='289390'>instruction</span>\
  \ <span m='290240'>completes</span> <span m='291100'>the</span> <span m='291230'>WB</span>\
  \ <span m='291830'>stage</span> <span m='292460'>of</span> <span m='292690'>the</span>\
  \ <span m='292780'>pipeline.</span> </p><p><span m='294430'>When</span> <span m='294610'>the</span>\
  \ <span m='294680'>SUBC</span> <span m='295170'>reads</span> <span m='295620'>R2,</span>\
  \ <span m='295880'>it</span> <span m='296460'>gets</span> <span m='296940'>a</span>\
  \ <span m='296970'>stale</span> <span m='297390'>value</span> <span m='297830'>of</span>\
  \ <span m='297970'>R2</span> <span m='298470'>because</span> <span m='299140'>the</span>\
  \ <span m='299600'>BEQ</span> <span m='299780'>instruction</span> <span m='300480'>has</span>\
  \ <span m='300690'>not</span> <span m='300920'>yet</span> <span m='301140'>completed,</span>\
  \ <span m='302030'>so</span> <span m='302480'>it</span> <span m='302560'>assumes</span>\
  \ <span m='303070'>that</span> <span m='303200'>R2</span> <span m='303460'>=</span>\
  \ <span m='303870'>0.</span> </p><p><span m='305080'>It</span> <span m='305200'>then</span>\
  \ <span m='305370'>subtracts</span> <span m='305940'>4</span> <span m='306090'>from</span>\
  \ <span m='306420'>that</span> <span m='306780'>and</span> <span m='306990'>tries</span>\
  \ <span m='307310'>to</span> <span m='307720'>write</span> <span m='308070'>-4</span>\
  \ <span m='308370'>into</span> <span m='308890'>R2.</span> </p><p><span m='310830'>Next</span>\
  \ <span m='311420'>the</span> <span m='311610'>ADD</span> <span m='311900'>runs.</span>\
  \ </p><p><span m='312980'>Recall</span> <span m='313430'>that</span> <span m='313600'>the</span>\
  \ <span m='313760'>ADD</span> <span m='314200'>would</span> <span m='314380'>normally</span>\
  \ <span m='314920'>read</span> <span m='315150'>R0</span> <span m='315470'>from</span>\
  \ <span m='315860'>the</span> <span m='315970'>register</span> <span m='316430'>file</span>\
  \ <span m='317060'>because</span> <span m='317540'>by</span> <span m='317700'>the</span>\
  \ <span m='317800'>time</span> <span m='318200'>the</span> <span m='318340'>ADD</span>\
  \ <span m='318570'>is</span> <span m='318710'>in</span> <span m='318860'>the</span>\
  \ <span m='319000'>RF</span> <span m='319380'>stage,</span> <span m='320380'>the</span>\
  \ <span m='320950'>ADDC</span> <span m='321040'>which</span> <span m='321260'>writes</span>\
  \ <span m='321540'>to</span> <span m='321660'>R0</span> <span m='321990'>has</span>\
  \ <span m='322420'>completed</span> <span m='323030'>all</span> <span m='323240'>the</span>\
  \ <span m='323310'>pipeline</span> <span m='323850'>stages.</span> </p><p><span\
  \ m='325160'>The</span> <span m='325290'>ADD</span> <span m='325710'>also</span>\
  \ <span m='326100'>normally</span> <span m='326610'>read</span> <span m='326810'>R2</span>\
  \ <span m='327310'>from</span> <span m='327780'>the</span> <span m='327860'>bypass</span>\
  \ <span m='328460'>path.</span> </p><p><span m='329510'>However,</span> <span m='330230'>since</span>\
  \ <span m='330860'>C3</span> <span m='331430'>does</span> <span m='331640'>not</span>\
  \ <span m='331870'>have</span> <span m='332150'>bypass</span> <span m='332730'>paths,</span>\
  \ <span m='333200'>it</span> <span m='333380'>reads</span> <span m='333630'>a</span>\
  \ <span m='333660'>stale</span> <span m='334090'>value</span> <span m='334500'>of</span>\
  \ <span m='334640'>R2</span> <span m='334960'>from</span> <span m='335380'>the</span>\
  \ <span m='335490'>register</span> <span m='335920'>file.</span> </p><p><span m='336920'>To</span>\
  \ <span m='337040'>determine</span> <span m='337630'>which</span> <span m='337900'>stale</span>\
  \ <span m='338240'>value</span> <span m='338700'>it</span> <span m='338870'>reads,</span>\
  \ <span m='339440'>we</span> <span m='339830'>need</span> <span m='340010'>to</span>\
  \ <span m='340120'>examine</span> <span m='340720'>the</span> <span m='340790'>pipeline</span>\
  \ <span m='341400'>diagram</span> <span m='342210'>to</span> <span m='342350'>see</span>\
  \ <span m='342600'>if</span> <span m='342770'>either</span> <span m='343120'>the</span>\
  \ <span m='343620'>BEQ</span> <span m='344120'>or</span> <span m='344510'>the</span>\
  \ <span m='344610'>SUBC</span> <span m='345060'>operations,</span> <span m='346140'>both</span>\
  \ <span m='346510'>of</span> <span m='346640'>which</span> <span m='346880'>eventually</span>\
  \ <span m='347480'>update</span> <span m='347820'>R2,</span> <span m='348380'>have</span>\
  \ <span m='348930'>completed</span> <span m='349590'>by</span> <span m='349790'>the</span>\
  \ <span m='349880'>time</span> <span m='350360'>the</span> <span m='350550'>ADD</span>\
  \ <span m='350880'>reads</span> <span m='351170'>its</span> <span m='351340'>source</span>\
  \ <span m='351720'>operands.</span> </p><p><span m='355130'>Looking</span> <span\
  \ m='355470'>at</span> <span m='355620'>our</span> <span m='355740'>pipeline</span>\
  \ <span m='356270'>diagram,</span> <span m='357190'>we</span> <span m='357500'>see</span>\
  \ <span m='357780'>that</span> <span m='357930'>when</span> <span m='358120'>the</span>\
  \ <span m='358250'>ADD</span> <span m='358570'>is</span> <span m='358750'>in</span>\
  \ <span m='358890'>the</span> <span m='359030'>RF</span> <span m='359450'>stage,</span>\
  \ <span m='360210'>neither</span> <span m='360720'>the</span> <span m='361230'>BEQ</span>\
  \ <span m='361570'>nor</span> <span m='361920'>the</span> <span m='362020'>SUBC</span>\
  \ <span m='362490'>have</span> <span m='362870'>completed,</span> <span m='363770'>thus</span>\
  \ <span m='364430'>the</span> <span m='364520'>value</span> <span m='365000'>read</span>\
  \ <span m='365240'>for</span> <span m='365450'>R2</span> <span m='365750'>is</span>\
  \ <span m='366260'>the</span> <span m='366530'>initial</span> <span m='366990'>value</span>\
  \ <span m='367430'>of</span> <span m='367550'>R2</span> <span m='368020'>which</span>\
  \ <span m='368540'>is</span> <span m='368680'>0.</span> </p><p><span m='368710'>We</span>\
  \ <span m='369770'>can</span> <span m='370870'>now</span> <span m='371080'>determine</span>\
  \ <span m='371600'>the</span> <span m='371670'>behavior</span> <span m='372270'>of</span>\
  \ <span m='372370'>the</span> <span m='372500'>ADD</span> <span m='372760'>instruction</span>\
  \ <span m='373670'>which</span> <span m='374030'>is</span> <span m='374170'>that</span>\
  \ <span m='374410'>it</span> <span m='374580'>assumes</span> <span m='375710'>R0</span>\
  \ <span m='376480'>=</span> <span m='376560'>4</span> <span m='376690'>and</span>\
  \ <span m='376900'>R2</span> <span m='377160'>=</span> <span m='377360'>0</span>\
  \ <span m='377510'>and</span> <span m='378110'>will</span> <span m='378690'>eventually</span>\
  \ <span m='379310'>write</span> <span m='379620'>a</span> <span m='379860'>4</span>\
  \ <span m='380070'>into</span> <span m='380490'>R3.</span> </p><p><span m='382220'>Finally,</span>\
  \ <span m='382910'>the</span> <span m='383050'>JMP</span> <span m='383360'>instruction</span>\
  \ <span m='383970'>wants</span> <span m='384310'>to</span> <span m='384400'>read</span>\
  \ <span m='384650'>the</span> <span m='384750'>result</span> <span m='385190'>of</span>\
  \ <span m='385290'>the</span> <span m='385420'>ADD,</span> <span m='386000'>however,</span>\
  \ <span m='386780'>since</span> <span m='387110'>there</span> <span m='387280'>are</span>\
  \ <span m='387310'>no</span> <span m='387530'>bypass</span> <span m='388150'>paths,</span>\
  \ <span m='388650'>it</span> <span m='388820'>reads</span> <span m='389090'>the</span>\
  \ <span m='389250'>original</span> <span m='389680'>value</span> <span m='390060'>of</span>\
  \ <span m='390190'>R3</span> <span m='390730'>which</span> <span m='391320'>was</span>\
  \ <span m='391720'>0</span> <span m='391940'>and</span> <span m='392260'>jumps</span>\
  \ <span m='392560'>to</span> <span m='392720'>address</span> <span m='393320'>0.</span>\
  \ </p><p><span m='394440'>Of</span> <span m='394540'>course,</span> <span m='395110'>had</span>\
  \ <span m='395320'>we</span> <span m='395460'>looked</span> <span m='395660'>at</span>\
  \ <span m='395780'>our</span> <span m='395880'>code</span> <span m='396180'>a</span>\
  \ <span m='396220'>little</span> <span m='396500'>more</span> <span m='396650'>closely,</span>\
  \ <span m='397530'>we</span> <span m='397780'>could</span> <span m='397980'>have</span>\
  \ <span m='398110'>determined</span> <span m='398640'>this</span> <span m='398820'>without</span>\
  \ <span m='399270'>all</span> <span m='399450'>the</span> <span m='399560'>intermediate</span>\
  \ <span m='400200'>steps</span> <span m='400800'>because</span> <span m='401120'>the</span>\
  \ <span m='401250'>ADD</span> <span m='401860'>is</span> <span m='402150'>the</span>\
  \ <span m='402270'>only</span> <span m='402570'>instruction</span> <span m='403180'>that</span>\
  \ <span m='403290'>tries</span> <span m='403630'>to</span> <span m='403760'>update</span>\
  \ <span m='404160'>R3,</span> <span m='404380'>and</span> <span m='404550'>you</span>\
  \ <span m='405170'>know</span> <span m='405850'>that</span> <span m='406010'>the</span>\
  \ <span m='406110'>JMP</span> <span m='406590'>would</span> <span m='406730'>normally</span>\
  \ <span m='407170'>get</span> <span m='407440'>R3</span> <span m='407630'>from</span>\
  \ <span m='407800'>the</span> <span m='408100'>bypass</span> <span m='408860'>path</span>\
  \ <span m='409220'>which</span> <span m='409400'>is</span> <span m='409530'>not</span>\
  \ <span m='409760'>available,</span> <span m='410630'>therefore</span> <span m='411540'>it</span>\
  \ <span m='411700'>must</span> <span m='412000'>read</span> <span m='412210'>the</span>\
  \ <span m='412310'>original</span> <span m='412800'>value</span> <span m='413200'>of</span>\
  \ <span m='413300'>R3</span> <span m='413870'>which</span> <span m='414470'>is</span>\
  \ <span m='416760'>0.</span> </p><p><span m='417520'>In</span> <span m='417650'>category</span>\
  \ <span m='418320'>C4,</span> <span m='418920'>the</span> <span m='419310'>betas</span>\
  \ <span m='419800'>do</span> <span m='419950'>not</span> <span m='420240'>annul</span>\
  \ <span m='420580'>instructions</span> <span m='421290'>that</span> <span m='421440'>were</span>\
  \ <span m='421550'>fetched</span> <span m='422020'>after</span> <span m='422430'>a</span>\
  \ <span m='422460'>branch</span> <span m='422870'>instruction</span> <span m='423510'>but</span>\
  \ <span m='423740'>aren\u2019t</span> <span m='423990'>supposed</span> <span m='424430'>to</span>\
  \ <span m='424500'>get</span> <span m='424660'>executed.</span> </p><p><span m='425990'>This</span>\
  \ <span m='426220'>means</span> <span m='426590'>that</span> <span m='426720'>the</span>\
  \ <span m='426790'>MULC</span> <span m='427240'>which</span> <span m='427730'>is</span>\
  \ <span m='427910'>fetched</span> <span m='428330'>after</span> <span m='428740'>the</span>\
  \ <span m='429200'>BEQ</span> <span m='429800'>is</span> <span m='430100'>actually</span>\
  \ <span m='430640'>executed</span> <span m='431380'>in</span> <span m='431570'>the</span>\
  \ <span m='431630'>pipeline</span> <span m='432340'>and</span> <span m='432490'>affects</span>\
  \ <span m='432960'>the</span> <span m='433050'>value</span> <span m='433460'>of</span>\
  \ <span m='433570'>R2.</span> </p><p><span m='434850'>Let\u2019s</span> <span m='435050'>take</span>\
  \ <span m='435240'>a</span> <span m='435290'>close</span> <span m='435740'>look</span>\
  \ <span m='435960'>at</span> <span m='436070'>what</span> <span m='436250'>happens</span>\
  \ <span m='436690'>in</span> <span m='436800'>each</span> <span m='437060'>instruction.</span>\
  \ </p><p><span m='439230'>Once</span> <span m='439490'>again</span> <span m='439860'>we</span>\
  \ <span m='440020'>begin</span> <span m='440340'>with</span> <span m='440530'>the</span>\
  \ <span m='440740'>ADDC</span> <span m='441110'>setting</span> <span m='441540'>R0</span>\
  \ <span m='441880'>to</span> <span m='442270'>4</span> <span m='442570'>and</span>\
  \ <span m='443040'>the</span> <span m='443420'>BEQ</span> <span m='443710'>setting</span>\
  \ <span m='444060'>R2</span> <span m='444240'>to</span> <span m='444890'>8.</span>\
  \ </p><p><span m='445870'>Since</span> <span m='446120'>our</span> <span m='446230'>bypass</span>\
  \ <span m='446840'>paths</span> <span m='447250'>are</span> <span m='447340'>now</span>\
  \ <span m='447580'>working,</span> <span m='448130'>we</span> <span m='448360'>can</span>\
  \ <span m='448540'>assume</span> <span m='448980'>that</span> <span m='449110'>we</span>\
  \ <span m='449200'>can</span> <span m='449390'>immediately</span> <span m='449990'>get</span>\
  \ <span m='450260'>the</span> <span m='450380'>updated</span> <span m='450940'>value.</span>\
  \ </p><p><span m='452260'>Next,</span> <span m='452860'>we</span> <span m='453070'>execute</span>\
  \ <span m='453640'>the</span> <span m='453720'>MULC</span> <span m='454230'>which</span>\
  \ <span m='454640'>takes</span> <span m='454950'>the</span> <span m='455010'>latest</span>\
  \ <span m='455440'>value</span> <span m='455730'>of</span> <span m='455880'>R2</span>\
  \ <span m='456170'>from</span> <span m='456550'>the</span> <span m='456620'>bypass</span>\
  \ <span m='457230'>path</span> <span m='457810'>and</span> <span m='458160'>multiplies</span>\
  \ <span m='458850'>it</span> <span m='458980'>by</span> <span m='459260'>2.</span>\
  \ </p><p><span m='460070'>So</span> <span m='460290'>it</span> <span m='460410'>sets</span>\
  \ <span m='460820'>R2</span> <span m='461430'>=</span> <span m='462040'>16.</span>\
  \ </p><p><span m='462300'>The</span> <span m='462870'>SUBC</span> <span m='464060'>now</span>\
  \ <span m='464660'>uses</span> <span m='465140'>this</span> <span m='465360'>value</span>\
  \ <span m='465770'>for</span> <span m='466410'>R2</span> <span m='466870'>from</span>\
  \ <span m='467260'>which</span> <span m='467530'>it</span> <span m='467640'>subtracts</span>\
  \ <span m='468240'>4</span> <span m='468440'>to</span> <span m='468900'>produce</span>\
  \ <span m='469470'>R2</span> <span m='470210'>=</span> <span m='470910'>12.</span>\
  \ </p><p><span m='472060'>The</span> <span m='472230'>ADD</span> <span m='472740'>then</span>\
  \ <span m='473150'>reads</span> <span m='473940'>R0</span> <span m='474410'>=</span>\
  \ <span m='474740'>4</span> <span m='475130'>and</span> <span m='475660'>adds</span>\
  \ <span m='476080'>to</span> <span m='476280'>it</span> <span m='476500'>R2</span>\
  \ <span m='476670'>=</span> <span m='476710'>12</span> <span m='476740'>to</span>\
  \ <span m='477850'>produce</span> <span m='479190'>R3</span> <span m='479930'>=</span>\
  \ <span m='480520'>16.</span> </p><p><span m='482300'>Finally,</span> <span m='483070'>the</span>\
  \ <span m='483380'>JMP</span> <span m='483780'>jumps</span> <span m='484150'>to</span>\
  \ <span m='484280'>address</span> <span m='484720'>16.</span> </p><p><span m='484750'>Since</span>\
  \ <span m='485080'>each</span> <span m='485960'>of</span> <span m='486860'>the</span>\
  \ <span m='487200'>four</span> <span m='487650'>categories</span> <span m='488480'>produces</span>\
  \ <span m='489020'>a</span> <span m='489110'>unique</span> <span m='489600'>jump</span>\
  \ <span m='489920'>address,</span> <span m='490690'>this</span> <span m='491080'>program</span>\
  \ <span m='491790'>can</span> <span m='492000'>be</span> <span m='492150'>used</span>\
  \ <span m='492500'>to</span> <span m='492590'>sort</span> <span m='492940'>out</span>\
  \ <span m='493210'>all</span> <span m='493450'>the</span> <span m='493540'>betas</span>\
  \ <span m='494170'>into</span> <span m='494640'>the</span> <span m='494760'>four</span>\
  \ <span m='495080'>categories.</span> </p>"
type: course
uid: 7393c2c5a336ff84391ab1c7e2b1ce62

---
None